<% include header.html %>
<link href="css/fSelect.css"
rel="stylesheet" type="text/css" />
<script src="js/fSelect.js"
type="text/javascript"></script>               

<!-- PAGE TITLE -->
<style type="text/css">
    .required {
        color:#f00;
    }
    .fs-dropdown {
        width: 30%;
    }
    .zone_select .fs-dropdown {
        width: 220px !important;
    }
    .zone_select .fs-wrap {
        width: 220px !important;
    }

    .bootstrap-select.form-control:not([class*="span"]) {
        max-width: 215px;
    }

    .table-wrapper {
        overflow-x: auto;
        max-width: 100%;
    }

    table {
        border-collapse: collapse;
        width: max-content;
        min-width: 100%;
    }

    td {
        padding: 8px;
        border: 1px solid #ccc;
        white-space: nowrap;
    }

</style>
<!-- END PAGE TITLE -->
<link href="css/mdtimepicker.css" rel="stylesheet">

<script type='text/javascript' src='js/mdtimepicker.js'></script>
<script type='text/javascript' src='js/jquery.serializejson.js'></script>

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <div class="row">

        <!-- for edit city type form -->
            <% if(typeof city_type_data != 'undefined'){ %>
            <form class="form-horizontal" method="post" id="update_city_type_detail" action="/update_city_type_detail">
                <div id="main_div" class="col-md-12">
                    <div class="panel panel-default tabs">
                        <ul class="nav nav-tabs" role="tablist">
                            <li onclick="main_tab(0)" class="active"><a href="#tab-first" role="tab" data-toggle="tab"><%= __('button_add_city') %></a></li>
                            <li onclick="main_tab(1)"><a href="#tab-second" role="tab" data-toggle="tab"><%= __('zone_to_zone_price') %></a></li>
                            <!-- <li onclick="main_tab(2)"><a href="#tab-third" role="tab" data-toggle="tab"><%= __('zone_for_queue') %></a></li> -->
                            <li onclick="main_tab(3)"><a href="#tab-fourth" role="tab" data-toggle="tab"><%= __('airport_to_city_price') %></a></li>
                            <li onclick="main_tab(4)"><a href="#tab-fifth" role="tab" data-toggle="tab"><%= __('city_to_city_price') %></a></li>
                            <% if(city_type_data.is_ride_share != 1){ %>
                            <li onclick="main_tab(5)"><a href="#tab-six" role="tab" data-toggle="tab"><%= __('car_rental_price') %></a></li>
                            <% } %>
                            <li onclick="main_tab(6)"><a href="#tab-seven" role="tab" data-toggle="tab"><%= __('rich_area_surge') %></a></li>
                            <li onclick="main_tab(7)"><a href="#tab-eight" role="tab" data-toggle="tab"><%= __('title_type_of_truck_pricing') %></a></li>
                        </ul>

                        <input type="hidden" class="form-control" name="id" id="id" value="<%= city_type_data._id %>" />
                        <div class="panel-body tab-content tab-validate" style="min-height: calc(100vh - 180px);">
                            <div class="tab-pane active" id="tab-first">
                                <div class="row">
                                    <div class="col-md-6">
                                        <input type="hidden" class="form-control" id="cityids" name="cityids" value="<%= city_type_data.cityid %>" />
                                        <div class="form-group">

                                             <label class="col-md-6 col-xs-5 control-label"><%= __('title_country') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="countryid" id="countryid" disabled="true" value="<%= city_type_data_country.countryname %>">
                                                </div>

                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_city') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="cityname" id="cityname" disabled="true" value="<%= city_data.cityname %>">
                                                    
                                                </div>

                                            </div>
                                        </div>

                                        <!-- <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_type') %></label>
    
                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <% if(city_type_data.is_ride_share == 1){ %>
                                                        <input type="text" class="form-control" name="is_ride_share" id="is_ride_share" disabled="true" value="<%= __('PRICE_TYPE_POOL_STRING') %>">
                                                    <% }else{ %>
                                                        <input type="text" class="form-control" name="is_ride_share" id="is_ride_share" disabled="true" value="<%= __('PRICE_TYPE_NORMAL_STRING') %>">
                                                    <% } %>
                                                </div>
    
                                            </div>
                                        </div> -->
                                        <% if(corporate_data){ %>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_corporate') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="corporate_name" id="corporate_name" disabled="true" value="<%= corporate_data.name %>">
                                                    
                                                </div>

                                            </div>
                                        </div>
                                        <% } %>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_type') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="typename" id="typename" disabled="true" value="<%= type_data.typename %>">
                                                    
                                                </div>

                                            </div>
                                        </div>



                                    <!-- </div>
                                </div>
                                <div class="panel-body">

                                </div>

                                <div class="row">
                                    <div class="col-md-6"> -->

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_max_space') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="max_space" id="max_space" value="<%= city_type_data.max_space %>" onkeypress="return isNumberKey(event);"
                                                           />
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_profit') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 c">
                                                    <input type="text" class="form-control" name="provider_profit" id="provider_profit" value="<%= city_type_data.provider_profit %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_min_fair') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="min_fare" id="min_fare" value="<%= city_type_data.min_fare %>" onkeypress="return isNumberKey(event);"
                                                           />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_distance_for_base_price') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select name="base_price_distance" class="form-control select">
                                                        <%for (i=0; i<=25; i++) {
                                                        if (city_type_data.base_price_distance == i) { %>
                                                        <option value="<%= i %>" selected=""><%= i %></option>
                                                        <% }else { %>
                                                        <option value="<%= i %>" ><%= i %></option>
                                                        <% } %>
                                                        <% } %>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_base_price') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="base_price" id="base_price" value="<%= city_type_data.base_price %>" onkeypress="return isNumberKey(event);"
                                                           />
                                                </div>
                                            </div>
                                        </div>

                                        

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_per_unit_distance') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="price_per_unit_distance" id="price_per_unit_distance" value="<%= city_type_data.price_per_unit_distance %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_for_total_unit_time') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="price_for_total_time" id="price_for_total_time" value="<%= city_type_data.price_for_total_time %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_waiting_time_start_after_minute') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="waiting_time_start_after_minute" id="waiting_time_start_after_minute" value="<%= city_type_data.waiting_time_start_after_minute %>"
                                                           onkeypress="return isNumberKeyWithoutPoint(event);" />
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_for_waiting_time') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="price_for_waiting_time" id="price_for_waiting_time" value="<%= city_type_data.price_for_waiting_time %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_waiting_time_multiple_locatin') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select name="waiting_time_start_after_minute_multiple_stops" class="form-control select">
                                                        <%for (i=0; i<=10; i++) {
                                                        if (city_type_data.waiting_time_start_after_minute_multiple_stops == i) { %>
                                                        <option value="<%= i %>" selected=""><%= i %></option>
                                                        <% }else { %>
                                                        <option value="<%= i %>" ><%= i %></option>
                                                        <% } %>
                                                        <% } %>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_waiting_time_price_multiple_locatin') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <input type="text" class="form-control" name="price_for_waiting_time_multiple_stops" id="price_for_waiting_time_multiple_stops" value="<%= city_type_data.price_for_waiting_time_multiple_stops %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" >
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_car_rental_business') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_car_rental_business" name="is_car_rental_business">
                                                        <% if(city_type_data.is_car_rental_business == "1") { %>

                                                        <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                        <% } else{ %>

                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0" selected = "selected"><%= __('title_off') %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" >
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_business') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_business" name="is_business">
                                                        <% if(city_type_data.is_business == "1") { %>

                                                        <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                        <% } else{ %>

                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0" selected = "selected"><%= __('title_off') %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_cancellation_fee') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" name="cancellation_fee" id="cancellation_fee" value="<%= city_type_data.cancellation_fee %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_cancellation_fee') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_tax') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="tax" id="tax" value="<%= city_type_data.tax %>" onkeypress="return isNumberKey(event);"
                                                           />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_user_miscellaneous_fee') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.user_miscellaneous_fee %>" name="user_miscellaneous_fee" id="user_miscellaneous_fee" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_user_miscellaneous_tax') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_user_tax') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.user_tax %>" name="user_tax" id="user_tax" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_user_tax') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_miscellaneous_fee') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.provider_miscellaneous_fee %>" name="provider_miscellaneous_fee" id="provider_miscellaneous_fee" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_provider_miscellaneous_tax') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_tax') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.provider_tax %>" name="provider_tax" id="provider_tax" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_provider_tax') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_cost_travel_insurance') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.cost_travel_insurance %>" name="cost_travel_insurance" id="cost_travel_insurance" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_cost_travel_insurance') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_stops') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.free_stops %>" name="free_stops" id="free_stops" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_free_stops') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group" >
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('is_zone') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_zone" name="is_zone">
                                                        <% if(city_type_data.is_zone == "1") { %>

                                                        <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                        <% } else{ %>

                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0" selected = "selected"><%= __('title_off') %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_ferry_ticket_price') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.ferry_ticket_price %>" name="ferry_ticket_price" id="ferry_ticket_price" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_ferry_ticket_price') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_ferry_ticket_flety_cost') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" onkeypress="return isNumberKey(event);" value="<%= city_type_data.ferry_flety_cost %>" name="ferry_flety_cost" id="ferry_flety_cost" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_ferry_flety_cost') %>">?</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <!-- <div class="form-group" id="zone_multiplier">
                                            <label class="col-md-6 col-xs-5 control-label">Zone Multiplier</label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="zone_multiplier" value="<%= city_type_data.zone_multiplier %>" onkeypress="return isNumberKey(event);" />
                                                </div>

                                            </div>
                                        </div> -->

                                        <div class="form-group" >
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_surge_hours') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9 ">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_surge_hours" name="is_surge_hours">
                                                        <% if(city_type_data.is_surge_hours == "1") { %>

                                                        <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                        <% } else{ %>

                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0" selected = "selected"><%= __('title_off') %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

    
                                       <!--  <div class="form-group" id="surge_start_hours">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_time_start') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <select name="surge_start_hour" class="form-control select">
                                                        <%for (i=0; i<=23; i++) {
                                                        if (city_type_data.surge_start_hour == i) { %>
                                                        <option value="<%= i %>" selected=""><%= i %></option>
                                                        <% }else { %>
                                                        <option value="<%= i %>" ><%= i %></option>
                                                        <% } %>
                                                        <% } %>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group" id="surge_end_hours">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_time_end') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <select name="surge_end_hour" class="form-control select">
                                                        <%for (i=0; i<=23; i++) {
                                                        if (city_type_data.surge_end_hour == i) { %>
                                                        <option value="<%= i %>" selected=""><%= i %></option>
                                                        <% }else { %>
                                                        <option value="<%= i %>" ><%= i %></option>
                                                        <% } %>
                                                        <% } %>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="form-group" id="surge_multipliers">
                                            <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_multiplier') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="col-md-9">
                                                    <input type="text" class="form-control" name="surge_multiplier" id="surge_multiplier" value="<%= city_type_data.surge_multiplier %>"
                                                           onkeypress="return isNumberKey(event);" />
                                                </div>

                                            </div>
                                        </div> -->

                                    </div>
                                </div>

                                <div class="row" style="margin-top: 50px;">
                                    <!-- <div class="col-md-3">
                                    </div> -->
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-5 control-label"><%= __('title_surge_time') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="panel panel-default tabs">
                                                    <ul class="nav nav-tabs" role="tablist">
                                                        <li><a href="#0" id="tab0" onclick="select_tab(0)" role="tab" data-toggle="tab"><%= __('sun') %></a></li>
                                                        <li><a href="#1" role="tab" onclick="select_tab(1)" data-toggle="tab"><%= __('mon') %></a></li>
                                                        <li><a href="#2" role="tab" onclick="select_tab(2)" data-toggle="tab"><%= __('tue') %></a></li>
                                                        <li><a href="#3" role="tab" onclick="select_tab(3)" data-toggle="tab"><%= __('wed') %></a></li>
                                                        <li><a href="#4" role="tab" onclick="select_tab(4)" data-toggle="tab"><%= __('thu') %></a></li>
                                                        <li><a href="#5" role="tab" onclick="select_tab(5)" data-toggle="tab"><%= __('fri') %></a></li>
                                                        <li><a href="#6" role="tab" onclick="select_tab(6)" data-toggle="tab"><%= __('sat') %></a></li>

                                                    </ul>

                                                    <div class="panel-body tab-content">
                                                        <%if(city_type_data.surge_hours){%>
                                                        <% city_type_data.surge_hours.forEach(function(surge_data){ %>
                                                            <div class="tab-pane" id="<%=surge_data.day%>">
                                                                <div class="row">
                                                                    <div class="form-group">
                                                                        <label class="col-md-4 control-label text-left"><%= __('title_is_surge_hours') %></label>
                                                                        <div class="col-md-4">
                                                                            <label class="switch">
                                                                                <% if( surge_data.is_surge == false ) { %>
                                                                                <input type="checkbox" class="switch" id="switch<%=surge_data.day%>" onchange="change_switch('<%=surge_data.day%>')" name="sms_notification" unchecked />
                                                                                <% } else{ %>
                                                                                <input type="checkbox" id="switch<%=surge_data.day%>" onchange="change_switch('<%=surge_data.day%>')" class="switch" name="sms_notification" checked />
                                                                                <% } %>
                                                                                <span></span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <button type="button" class="btn btn-primary" style="text-align:center;margin: 0 auto;" onclick="add_time()"><span class="fa fa-plus"></span><%= __('add_time') %></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="table-responsive">
                                                                            <table class="table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th><%= __('surge_start_time') %></th>
                                                                                        <th><%= __('surge_end_time') %></th>
                                                                                        <th><%= __('surge_multiplier') %></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody id="day_time<%=surge_data.day%>">
                                                                                    
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        <% }) %>
                                                        <% } %>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>

                             <div class="tab-pane" id="tab-fourth">
                                <div class="panel-body">
                                    <div id="airport_data">
                                            
                                </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-fifth">
                                <div class="panel-body">
                                    <div id="dest_city">
                                            
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-seven">
                                <div class="panel-body">
                                    <div id="rich_area_surge">
                                            
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-third">
                                <div class="panel-body">
                                    <div class="row">
                                        
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-second">
                                <div class="zone_data">
                                    <div class="panel-heading"><%= __('zone_to_zone_price') %></div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div>
                                                        <div> 
                                                            <label><%=__('select_zone1')%></label>
                                                        <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="zone1" data-live-search="true" name="zone1[]" >  
                                                            <% city_zone.forEach(function (city_zone_detail) {    %> 
                                                                <option id="<%= city_zone_detail._id %>" value="<%= city_zone_detail._id %>"><%= city_zone_detail.title %></option>   
                                                            <% }); %> 
                                                        </select> 
                                                        </div> 
                                                    </div>  
                                                </div> 
                                            </div>
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div>
                                                        <div> 
                                                            <label><%=__('select_zone2')%></label>
                                                        <select  class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="zone2" data-live-search="true" name="zone2[]" >  
                                                            <% city_zone.forEach(function (city_zone_detail) {    %> 
                                                                <option value="<%= city_zone_detail._id %>"><%= city_zone_detail.title %></option>   
                                                            <%    });    %> 
                                                        </select> 
                                                        </div> 
                                                    </div>  
                                                </div> 
                                            </div>
                                            <div class="col-md-3 form-group zone_select"> 
                                                <div class="form-group"> 
                                                    <div>
                                                        <div> 
                                                            <label><%=__('title_select_model')%></label>
                                                            <select class="form-control select fselect-model" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="selected_model_id" name="selected_model_id[]">
                                                            <optgroup id="append" label="<%= __('title_truck_type_list') %>">
                                                                <% type_models.forEach(function (model) {    %> 
                                                                    <option value="<%= model._id %>"><%= model.model_name %></option>   
                                                                <% }) %>
                                                            </optgroup>
                                                            </select>
                                                        </div> 
                                                    </div>  
                                                </div> 
                                            </div>
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    
                                                    <div> 
                                                        <label><%= __('title_amount') %></label> 
                                                        
                                                            <input type="text" id="amount" class="form-control" name="amount[]" value=""  /> 
                                                        
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('cost_per_helper') %> </label> 
                                                        <input type="text" id="cost_per_helper_zone" class="form-control" name="cost_per_helper[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('cost_of_internal_stops_same_city') %> </label> 
                                                        <input type="text" id="cost_per_stop_inside_city_zone" class="form-control" name="cost_per_stop_inside_city[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('cost_per_stop_between_cities') %> </label> 
                                                        <input type="text" id="cost_per_stop_outside_city_zone" class="form-control" name="cost_per_stop_outside_city[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('title_price_night_shift') %> </label> 
                                                        <input type="text" id="night_shift_zone" class="form-control" name="night_shift[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('title_price_ferry_ticket') %> </label> 
                                                        <input type="text" id="boat_ticket_zone" class="form-control" name="boat_ticket[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <% if(corporate_data?.is_use_fixed_partner_profit){ %>                                                           
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('corporate_partner_profit_fees') %></label> 
                                                        <input type="text" id="partner_profit_fees" class="form-control" name="partner_profit_fees[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <label><%=__('title_profit_type')%></label>
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="partner_profit_type" data-live-search="true" name="partner_profit_type[]" >  
                                                        <option selected value="0">%</option>   
                                                        <option value="1">Net Price</option>   
                                                    </select> 
                                                </div> 
                                            </div> 
                                            <% } %>

                                            <% if(city_type_data_country.countryname == "Panama"){ %>
                                            <div class="col-md-2 form-group"> 
                                                <div class="form-group"> 
                                                    <div> 
                                                        <label><%= __('title_ti_internal_transit') %> </label> 
                                                        <input type="text" id="ti_zone" class="form-control" name="ti_zone[]" value=""  /> 
                                                    </div>
                                                    <lable id="zone_error" style="color: red;"></lable>
                                                </div> 
                                            </div> 
                                            <% } %>

                                            <div class="col-md-2 form-group"> 
                                                <button type="button" class="btn btn-primary btn-block" id="plush_button" style="width:80px;margin-top: 22px;"><%= __('button_add') %></button>
                                            </div>
                                        </div>
                                        <div class="table-wrapper">

                                          <table class="table" id="customre2">               
                                            <thead>
                                              <tr>
                                                <th><%= __('title_from') %></th>
                                                <th><%= __('title_to') %></th>
                                                <th><%= __('title_model') %></th>
                                                <th><%= __('title_amount') %></th>
                                                <th><%= __('cost_per_helper') %></th>
                                                <th><%= __('cost_of_internal_stops_same_city') %></th>
                                                <th><%= __('cost_per_stop_between_cities') %></th>
                                                <th><%= __('title_price_night_shift') %></th>
                                                <th><%= __('title_price_ferry_ticket') %></th>
                                                <% if(corporate_data?.is_use_fixed_partner_profit){ %>                                                           
                                                    <th><%= __('corporate_partner_profit_fees') %></th>
                                                    <th><%= __('title_profit_type') %></th>
                                                <% } %>
                                                <% if(city_type_data_country.countryname == "Panama"){ %>
                                                    <th><%= __('title_ti_internal_transit') %></th>
                                                <% } %>

                                              </tr>
                                            </thead>

                                            <tbody id="append">                                   

                                              <% zonevalue.forEach(function(data){ %>                                      

                                                  <tr class="demo" id="remove<%= data._id %>">
                                                    <td><%= data.from_detail.title %></td>
                                                    <td><%= data.to_detail.title %></td>
                                                    <td>
                                                        <% 
                                                            const selectedModelIds = data.model_details.map(md => md._id.toString());
                                                        %>
                                                        <select class="form-control select fselect-model" multiple="multiple" 
                                                                data-none-selected-text="<%= __('title_nothing_selected') %>" 
                                                                id="selected_model_id<%= data._id %>" 
                                                                name="selected_model_id[]">
                                                            
                                                            <optgroup id="append" label="<%= __('title_truck_type_list') %>">
                                                                <% type_models.forEach(function(model) { 
                                                                    const modelIdStr = model._id.toString();
                                                                    const isSelected = selectedModelIds.includes(modelIdStr);
                                                                %>
                                                                    <option value="<%= modelIdStr %>" <%= isSelected ? 'selected' : '' %>>
                                                                        <%= model.model_name %>
                                                                    </option>
                                                                <% }); %>
                                                            </optgroup>
                                                        </select>
                                                    </td>
                                                    <td><input type="text" id="amount<%= data._id %>" value="<%= data.amount %>"></td>
                                                    <td><input type="text" id="cost_per_helper_zone<%= data._id %>" value="<%= data?.cost_per_helper %>"></td>
                                                    <td><input type="text" id="cost_per_stop_inside_city_zone<%= data._id %>" value="<%= data?.cost_per_stop_inside_city %>"></td>
                                                    <td><input type="text" id="cost_per_stop_outside_city_zone<%= data._id %>" value="<%= data?.cost_per_stop_outside_city %>"></td>
                                                    <td><input type="text" id="night_shift_zone<%= data._id %>" value="<%= data?.night_shift %>"></td>
                                                    <td><input type="text" id="boat_ticket_zone<%= data._id %>" value="<%= data?.boat_ticket %>"></td>
                                                    <% if(corporate_data?.is_use_fixed_partner_profit){ %>                                                           
                                                        <td><input type="text" id="partner_profit_fees<%= data._id %>" value="<%= data.partner_profit_fees %>"></td>
                                                        <td>
                                                            <select class="form-control select"
                                                                    data-none-selected-text="<%= __('title_nothing_selected') %>" 
                                                                    id="partner_profit_type<%= data._id %>" 
                                                                    data-live-search="true" 
                                                                    name="partner_profit_type[]">
                                                                    <option value="0" <%= data.partner_profit_type == 0 ? 'selected' : '' %>>%</option>
                                                                    <option value="1" <%= data.partner_profit_type == 1 ? 'selected' : '' %>>Net price</option>
                                                            </select>
                                                        </td>
                                                    <% } %>
                                                    <% if(city_type_data_country.countryname == "Panama"){ %>
                                                        <td><input type="text" id="ti_zone<%= data._id %>" value="<%= data?.ti_zone %>"></td>
                                                    <% } %>
                                                    <td><button type="button" class="btn btn-primary btn-block" onclick="updateentry('<%= data._id %>')" style="float:left;text-align:center;width:80px;margin: 0 auto;"><%= __('button_update') %></button>
                                                        <button  type="button" class="btn btn-danger btn-block" onclick="deleteentry('<%= data._id %>')" style="text-align:center;width:80px;margin: 0 auto;"><%= __('button_delete') %></button>
                                                    </td>
                                                  </tr>

                                              <% }) %>
                                            </tbody>
                                            </table>            
                                        </div>
                                        <div class="col-md-12" style="text-align: center;">

                                            
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-six">
                                <div class="panel-body">
                                    <button type="button" class="btn btn-primary btn-block" onclick="add_carrental_form()" style="text-align:center;width:120px;margin: 0 auto;"><%= __('add_package') %></button>
                                    <div id="car_rental_data">
                                        <div class="table-responsive" style="padding-bottom: 60px;">
                                            <table class="table">               
                                                <thead>
                                                    <tr>
                                                        <th><%= __('title_package_name') %></th>
                                                        <th><%= __('title_distance_for_base_price') %></th>
                                                        <th><%= __('title_time_for_base_price') %></th>
                                                        <th><%= __('title_base_price') %></th>
                                                        <th><%= __('title_price_per_unit_distance') %></th>
                                                        <th><%= __('title_price_for_total_unit_time') %></th>
                                                        <th><%= __('title_is_business') %></th>
                                                        <th width="15%"><%= __('title_is_action') %></th>
                                                    </tr>
                                                </thead>

                                                <tbody id="car_rental">
                                                    <% city_type_data.car_rental_list.forEach(function(car_rental_data){ %>
                                                        <tr id="new_car_rental<%=car_rental_data._id%>">
                                                            <td><input class="form-control" type="text" name="carrental_typename" id="carrental_typename<%=car_rental_data._id%>" value="<%=car_rental_data.typename%>"></td>
                                                            <td><input  onkeypress="return isNumberKey(event);" class="form-control" type="text" name=carrental_"base_price_distance" id="carrental_base_price_distance<%=car_rental_data._id%>" value="<%=car_rental_data.base_price_distance%>"></td>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_base_price_time" id="carrental_base_price_time<%=car_rental_data._id%>" value="<%=car_rental_data.base_price_time%>"></td>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_base_price" id="carrental_base_price<%=car_rental_data._id%>" value="<%=car_rental_data.base_price%>"></td>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_price_per_unit_distance" id="carrental_price_per_unit_distance<%=car_rental_data._id%>" value="<%=car_rental_data.price_per_unit_distance%>"></td>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_price_for_total_time" id="carrental_price_for_total_time<%=car_rental_data._id%>" value="<%=car_rental_data.price_for_total_time%>"></td>


                                                            <td><select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="carrental_is_business<%=car_rental_data._id%>" name="carrental_is_business">
                                                                <% if(car_rental_data.is_business == "1") { %>

                                                                    <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                                    <option value="0"><%= __('title_off') %></option>
                                                                    <% } else{ %>

                                                                    <option value="1"><%= __('title_on') %></option>
                                                                    <option value="0" selected = "selected"><%= __('title_off') %></option>
                                                                <% } %>
                                                                </select>
                                                            </td>

                                                            <td><button type="button" onclick="update_carrental_data('<%=car_rental_data._id%>')" class="btn btn-primary" style="float:left;text-align:center;"><%= __('button_update') %></button>
                                                                <button  type="button" onclick="delete_carrental_data('<%=car_rental_data._id%>')" class="btn btn-danger" style="text-align:center;margin-left:10px; "><%= __('button_delete') %></button>
                                                            </td>
                                                        </tr>   
                                                    <% }); %>
                                                    <!-- <tr>
                                                        <td><input class="form-control" type="text" value="Hourly"></td>
                                                        <td><input class="form-control" type="text" value="20"></td>
                                                        <td><input class="form-control" type="text" value="60"></td>
                                                        <td><input class="form-control" type="text" value="500"></td>
                                                        <td><input class="form-control" type="text" value="20"></td>
                                                        <td><input class="form-control" type="text" value="2"></td>
                                                        <td><select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_car_rental_business" name="is_car_rental_business">
                                                                <option value="1"><%= __('title_on') %></option>
                                                                <option value="0"><%= __('title_off') %></option>
                                                            </select>
                                                        </td>

                                                        <td><button type="button" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_update') %></button>
                                                            <button  type="button" class="btn btn-danger" style="text-align:center;margin: 0 auto;"><%= __('button_delete') %></button>

                                                        </td>
                                                    </tr> -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab-eight">
                            <div class="panel-body">
                                <button type="button" class="btn btn-primary btn-block" onclick="add_model_pricing_form()" style="text-align:center;width:120px;margin: 0 auto;"><%= __('add_package') %></button>
                                <div id="car_rental_data">
                                    <div class="table-responsive" style="padding-bottom: 60px;">
                                        <table class="table">               
                                            <thead>
                                                <tr>
                                                    <th><%= __('title_truck_type') %></th>
                                                    <th><%= __('title_service') %></th>
                                                    <th><%= __('title_capacity') %></th>
                                                    <th><%= __('title_min_fare') %></th>

                                                    <th><%= __('price_per_km_a') %></th>
                                                    <th><%= __('price_per_km_b') %></th>
                                                    <th><%= __('price_per_km_c') %></th>
                                                    <th><%= __('price_per_km_d') %></th>
                                                    <th><%= __('price_per_km_e') %></th>
                                                    <th><%= __('price_per_km_f') %></th>
                                                    <th><%= __('price_per_km_g') %></th>
                                                    <th><%= __('price_per_km_h') %></th>
                                                    <th><%= __('price_per_km_i') %></th>
                                                    <th><%= __('price_per_km_j') %></th>
                                                    <th><%= __('price_per_km_k') %></th>
                                                    <th><%= __('price_per_km_m') %></th>
                                                    <th><%= __('price_per_km_n') %></th>
                                                    <th><%= __('price_per_km_l') %></th>
                                                    <th><%= __('price_per_km_o') %></th>


                                                    <% if(
                                                        city_type_data.model_type != MODEL_TRUCK_TYPE.GANDOLA || city_type_data.model_type != MODEL_TRUCK_TYPE.CABEZAL

                                                        ){ 
                                                    %>
                                                        <th><%= __('price_per_km_r') %></th>
                                                    <%
                                                        }
                                                    %>
                                                    <% if(
                                                        city_type_data.model_type == MODEL_TRUCK_TYPE.GANDOLA || city_type_data.model_type == MODEL_TRUCK_TYPE.CABEZAL
                                                        ){ 
                                                    %>
                                                        <th><%= __('price_per_km_p_gandola') %></th>
                                                        <th><%= __('price_per_km_q_gandola') %></th>
                                                        <th><%= __('price_per_km_r_gandola') %></th>
                                                        <th><%= __('price_per_km_s_gandola') %></th>
                                                        <th><%= __('price_per_km_t_gandola') %></th>
                                                        <th><%= __('price_per_km_u_gandola') %></th>
                                                        <th><%= __('price_per_km_v_gandola') %></th>
                                                        <th><%= __('price_per_km_w_gandola') %></th>
                                                        <th><%= __('price_per_km_y_gandola') %></th>
                                                    <%
                                                        }
                                                        %>
                                                        
                                                        <th><%= __('fixed_fees') %></th>
                                                        <th><%= __('cost_of_internal_stops_same_city') %></th>
                                                        <th><%= __('cost_per_stop_between_cities') %></th>
                                                        <th><%= __('cost_per_helper') %></th>
                                                        <th><%= __('title_price_night_shift') %></th>
                                                        <th><%= __('title_price_ferry_ticket') %></th>
                                                        <% if(corporate_data?.is_use_fixed_partner_profit){ %>
                                                            <th><%= __('corporate_partner_profit_fees') %></th>
                                                        <% } %>
                                                        <% if(city_type_data_country.countryname == "Panama"){ %>
                                                            <th><%= __('title_ti_internal_transit') %></th>
                                                        <% } %>

                                                    <th width="15%"><%= __('title_is_action') %></th>

                                                </tr>
                                            </thead>

                                            <tbody id="model_pricing">
                                                <% city_type_data.model_pricing_list.forEach(function(model_pricing_data){ %>
                                                    <tr id="new_model_pricing<%=model_pricing_data._id%>">
                                                        <td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="modelid<%=model_pricing_data._id%>" name="modelid[]"><optgroup label="<%= __('title_truck_type_list') %>">
                                                            <% for(var index in model_pricing_data.modelid) { %>
                                                                <option selected disabled><%= model_pricing_data.modelid[index].model_name %></option>
                                                            <% } %>
                                                        </optgroup></select></td>
                                                        <td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="serviceid<%=model_pricing_data._id%>" name="serviceid[]"><optgroup label="<%= __('title_service_list') %>">
                                                            <% for(var index in model_pricing_data.serviceid) { %>
                                                                <option selected disabled><%= model_pricing_data.serviceid[index].service_name %></option>
                                                            <% } %>
                                                        </optgroup></select></td>
                                                        <td>
                                                            <select 
                                                                class="form-control select" 
                                                                multiple="multiple"
                                                                data-none-selected-text="<%= __('title_nothing_selected') %>"
                                                                id="capacityid<%= model_pricing_data._id %>"
                                                                name="capacityid[]"
                                                            >
                                                                <optgroup label="<%= __('title_capacity_list') %>">
                                                                <% 
                                                                    const unitLabels = {
                                                                    0: __('unit_kilos'),
                                                                    1: __('unit_litre'),
                                                                    2: __('unit_meter_cube'),
                                                                    3: __('unit_pallets')
                                                                    };
                                                                %>
                                                                <% model_pricing_data.capacityid.forEach(function(capacity) { %>
                                                                    <option selected disabled>
                                                                    <%= capacity.capacity_name %> <%= unitLabels[capacity.unit] || '' %>
                                                                    </option>
                                                                <% }); %>
                                                                </optgroup>
                                                            </select>
                                                        </td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="min_fare" id="min_fare<%=model_pricing_data._id%>" value="<%=model_pricing_data.min_fare%>"></td>


                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_a" id="price_per_km_a<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_a%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_b" id="price_per_km_b<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_b%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_c" id="price_per_km_c<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_c%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_d" id="price_per_km_d<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_d%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_e" id="price_per_km_e<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_e%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_f" id="price_per_km_f<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_f%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_g" id="price_per_km_g<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_g%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_h" id="price_per_km_h<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_h%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_i" id="price_per_km_i<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_i%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_j" id="price_per_km_j<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_j%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_k" id="price_per_km_k<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_k%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_m" id="price_per_km_m<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_m%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_n" id="price_per_km_n<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_n%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_l" id="price_per_km_l<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_l%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_o" id="price_per_km_o<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_o%>"></td>
                                                        
                                                        
                                                        <% if(
                                                            city_type_data.model_type != MODEL_TRUCK_TYPE.GANDOLA || city_type_data.model_type != MODEL_TRUCK_TYPE.CABEZAL
                                                            ){ 
                                                                %>
                                                                <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_r" id="price_per_km_r<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_r%>"></td>
                                                                <% } %>
                                                                
                                                                <% if(city_type_data.model_type == MODEL_TRUCK_TYPE.GANDOLA || city_type_data.model_type == MODEL_TRUCK_TYPE.CABEZAL){ %>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_p" id="price_per_km_p<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_p%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_q" id="price_per_km_q<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_q%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_r" id="price_per_km_r<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_r%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_s" id="price_per_km_s<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_s%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_t" id="price_per_km_t<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_t%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_u" id="price_per_km_u<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_u%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_v" id="price_per_km_v<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_v%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_w" id="price_per_km_w<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_w%>"></td>
                                                                    <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_y" id="price_per_km_y<%=model_pricing_data._id%>" value="<%=model_pricing_data.price_per_km_y%>"></td>
                                                        <%}%>
                                                        
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="fixed_fees" id="fixed_fees<%=model_pricing_data._id%>" value="<%=model_pricing_data.fixed_fees%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="cost_per_stop_inside_city" id="cost_per_stop_inside_city<%=model_pricing_data._id%>" value="<%=model_pricing_data.cost_per_stop_inside_city%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="cost_per_stop_outside_city" id="cost_per_stop_outside_city<%=model_pricing_data._id%>" value="<%=model_pricing_data.cost_per_stop_outside_city%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="cost_per_helper" id="cost_per_helper<%=model_pricing_data._id%>" value="<%=model_pricing_data.cost_per_helper%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="night_shift" id="night_shift<%=model_pricing_data._id%>" value="<%=model_pricing_data.night_shift%>"></td>
                                                        <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="boat_ticket" id="boat_ticket<%=model_pricing_data._id%>" value="<%=model_pricing_data.boat_ticket%>"></td>
                                                        <% if(corporate_data?.is_use_fixed_partner_profit){ %>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="corporate_partner_profit_fees" id="corporate_partner_profit_fees<%=model_pricing_data._id%>" value="<%=model_pricing_data.corporate_partner_profit_fees%>"></td>
                                                        <% } %>
                                                        <% if(city_type_data_country.countryname == "Panama"){ %>
                                                            <td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="ti_internal_transit" id="ti_internal_transit<%=model_pricing_data._id%>" value="<%=model_pricing_data.ti_internal_transit%>"></td>
                                                        <% } %>
                                                        <td><button type="button" onclick="update_modelpricing_data('<%=model_pricing_data._id%>')" class="btn btn-primary" style="float:left;text-align:center;"><%= __('button_update') %></button></td>
                                                        <td><button  type="button" onclick="delete_modelpricing_data('<%=model_pricing_data._id%>')" class="btn btn-danger" style="text-align:center; "><%= __('button_delete') %></button></td>


                                                    </tr>   
                                                <% }); %>
                                                <!-- <tr>
                                                    <td><input class="form-control" type="text" value="Hourly"></td>
                                                    <td><input class="form-control" type="text" value="20"></td>
                                                    <td><input class="form-control" type="text" value="60"></td>
                                                    <td><input class="form-control" type="text" value="500"></td>
                                                    <td><input class="form-control" type="text" value="20"></td>
                                                    <td><input class="form-control" type="text" value="2"></td>
                                                    <td><select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_car_rental_business" name="is_car_rental_business">
                                                            <option value="1"><%= __('title_on') %></option>
                                                            <option value="0"><%= __('title_off') %></option>
                                                        </select>
                                                    </td>

                                                    <td><button type="button" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_update') %></button>
                                                        <button  type="button" class="btn btn-danger" style="text-align:center;margin: 0 auto;"><%= __('button_delete') %></button>

                                                    </td>
                                                </tr> -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                            
                        </div>
                        <div id="footer" class="panel-footer">
                            <button id="submit" type="submit" name="submit" value="submit" class="btn btn-primary btn-block" style="text-align:center;width:80px;margin: 0 auto;"><%= __('button_submit') %></button>
                        </div>
                    </div>
                </div>
                <div id="zone_queue" class="col-md-4" style="display: none;">
                    <div class="panel panel-default tabs">
                        <div class="panel-heading"><%= __('zone_for_queue') %></div>
                        <div class="panel-body tab-content tab-validate" style="min-height: calc(100vh - 180px);">
                            <!-- <div class="tab-pane active" id="tab-first"> -->
                                <% city_zone.forEach(function (city_zone_detail){%>
                                    <div class="col-md-6"> 
                                        <label class="check">
                                            <%if(city_type_data.zone_ids && String(city_type_data.zone_ids).indexOf(String(city_zone_detail._id)) == -1){ %>
                                                <input type="checkbox" id="<%=city_zone_detail.id%>" value="<%=city_zone_detail.id%>" name="zone_ids[]" class="icheckbox"/> <%=city_zone_detail.title%>

                                            <% } else { %>
                                                <input type="checkbox" id="<%=city_zone_detail.id%>" value="<%=city_zone_detail.id%>" name="zone_ids[]" class="icheckbox" checked/> <%=city_zone_detail.title%>
                                            <% } %>
                                        </label>
                                    </div>
                                <% }) %>
                            <!-- </div> -->
                        </div>
                    </div>
                </div>
            </form>

            <!-- for add city type form -->

            <% }else{ %>
                
                <form class="form-horizontal" method="post" id="add_city_type_detail">
                    <div id="main_div" class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                
                                <div class="row">
                                    
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            
                                            <label class="col-md-3 col-xs-5 control-label"><%= __('title_country') %></label>
                                            
                                            <div class="col-md-8 col-xs-7">
                                                <div class="col-md-8">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>"  data-live-search="true" name="countryid" id="countryid">
                                                        <option selected disabled hidden style='display: none'><%= __('title_select_country')%></option>
                                                        <% city_type_data_country.forEach(function(country_data) { %>
                                                            <option value="<%= country_data._id %>"><%= country_data.countryname %></option>
                                                            <% }); %>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label"><%= __('title_city') %></label>
                                                
                                                <div class="col-md-8 col-xs-7">
                                                    <div class="col-md-8">
                                                        
                                                        <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" data-live-search="true" name="cityid" id='cityid'>
                                                            <option selected disabled hidden style='display: none'><%= __('title_select_city')%></option>
                                                        </select>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            
                                            <!-- <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label"><%= __('title_price_type') %></label>
                                                
                                                <div class="col-md-8 col-xs-7">
                                                    <div class="col-md-8">
                                                        
                                                        <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" data-live-search="true" name="is_ride_share" id='is_ride_share'>
                                                            <option value="0"><%= __('PRICE_TYPE_NORMAL_STRING') %></option>
                                                            <option value="1"><%= __('PRICE_TYPE_POOL_STRING') %></option>
                                                        </select>
                                                    </div>
                                                    
                                                </div>
                                            </div> -->
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label"><%= __('title_price_type') %></label>
                                
                                                <div class="col-md-9 col-xs-7">
                                                  <div class="col-md-9">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="pricing_type" name="user_type">
                                                        <option value="0" selected><%= __('title_admin') %></option>
                                                        <option value="<%= constant_json.CORPORATE_UNIQUE_NUMBER %>"><%= __('title_corporate') %></option>
                                                    </select>
                                                  </div>
                                
                                                </div>
                                              </div>

                                              <div class="form-group" id="corporate_list" style="display: none;">
          
                                                  <label class="col-md-3 col-xs-5 control-label"><%= __('title_corporate') %></label>
          
                                                  <div class="col-md-8 col-xs-7">
                                                      <div class="col-md-8">
                                                          <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>"  data-live-search="true" name="user_type_id" id="user_type_id">
                                                              <option selected disabled hidden style='display: none'><%= __('title_select_corporate')%></option>
                                                          </select>
                                                      </div>
                                                  </div>
                                              </div>
                                            <div class="form-group">
                                                <label class="col-md-3 col-xs-5 control-label"><%= __('title_type') %></label>
                                                
                                        <div class="col-md-8 col-xs-7">
                                            <div class="col-md-8">
                                                <select class="form-control  select " name="typename" id='typename'>

                                                </select>
                                            </div>

                                        </div>
                                    </div>
                      

                                </div>
                            </div>

                            <div class="panel-body">

                            </div>

                            <div class="row">

                                <div class="col-md-6">


                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_profit') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="provider_profit" id="provider_profit"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_provider_profit') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_min_fair') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="min_fare" id="min_fare" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_min_fare') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_distance_for_base_price') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">

                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" name="base_price_distance" id="base_price_distance">
                                                        <% for(i=0; i<=25; i++) { %>
                                                        <option value='<%= i %>'><%= i %> </option>
                                                        <% } %>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_distance_for_base_price') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_base_price') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="base_price" id="base_price" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_base_price') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_per_unit_distance') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="price_per_unit_distance" id="price_per_unit_distance"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_price_per_unit_distance') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_for_total_unit_time') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="price_for_total_time" id="price_for_total_time"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_price_for_total_unit_time') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>



                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_waiting_time_start_after_minute') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKeyWithoutPoint(event);" name="waiting_time_start_after_minute" id="waiting_time_start_after_minute"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_waiting_time_start_after_minute') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_price_for_waiting_time') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="price_for_waiting" id="price_for_waiting"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_price_for_waiting_time') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_waiting_time_multiple_locatin') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9 ">
                                                <select name="waiting_time_start_after_minute_multiple_stops" class="form-control select">
                                                    <%for (i=0; i<=10; i++) {%>
                                                    <option value="<%= i %>" ><%= i %></option>
                                                    <% } %>
                                                </select>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_waiting_time_price_multiple_locatin') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9 ">
                                                <input type="text" class="form-control" name="price_for_waiting_time_multiple_stops" id="price_for_waiting_time_multiple_stops"
                                                        onkeypress="return isNumberKey(event);" />
                                            </div>
                                        </div>
                                    </div>

                                    

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_max_space') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="max_space" id="max_space" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_max_space') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_car_rental_business') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_car_rental_business" name="is_car_rental_business">
                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_is_business') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                                <div class="col-md-6">

                                    

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_business') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_business" name="is_business">
                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_is_business') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_cancellation_fee') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="cancellation_fee" id="cancellation_fee"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_cancellation_fee') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_tax') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="tax" id="tax" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_tax') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_user_miscellaneous_fee') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="user_miscellaneous_fee" id="user_miscellaneous_fee" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_user_miscellaneous_tax') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_user_tax') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="user_tax" id="user_tax" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_user_tax') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_miscellaneous_fee') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="provider_miscellaneous_fee" id="provider_miscellaneous_fee" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_provider_miscellaneous_tax') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_provider_tax') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="provider_tax" id="provider_tax" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_provider_tax') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_cost_travel_insurance') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="cost_travel_insurance" id="cost_travel_insurance" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_cost_travel_insurance') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_free_stops') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="free_stops" id="free_stops" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_free_stops') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group" >
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('is_zone') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9 ">
                                                <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_zone" name="is_zone">
                                                   
                                                    <option value="1" selected = "selected"><%= __('title_on') %></option>
                                                    <option value="0"><%= __('title_off') %></option>
                                                   
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="form-group" id="zone_multiplier">
                                        <label class="col-md-6 col-xs-5 control-label">Zone Multiplier</label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <input type="text" class="form-control" name="zone_multiplier" value="1" onkeypress="return isNumberKey(event);" />
                                            </div>

                                        </div>
                                    </div>
                                     -->
                                    <div class="form-group">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_is_surge_hours') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="is_surge_hours" name="is_surge_hours">
                                                        <option value="1"><%= __('title_on') %></option>
                                                        <option value="0"><%= __('title_off') %></option>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_is_surge_hours') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <!-- <div class="form-group" id="surge_start_hours">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_time_start') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" name="surge_start_hour" id="surge_start_hour">
                                                        <% for(i=0; i<=23; i++) { %>
                                                        <option value='<%= i %>'><%= i %> </option>
                                                        <% } %>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_surge_time_start') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group" id="surge_end_hours">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_time_end') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" name="surge_end_hour" id="surge_end_hour">
                                                        <% for(i=0; i<=23; i++) { %>
                                                        <option value='<%= i %>'><%= i %> </option>
                                                        <% } %>
                                                    </select>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_surge_time_end') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="form-group" id="surge_multipliers">
                                        <label class="col-md-6 col-xs-5 control-label"><%= __('title_surge_multiplier') %></label>

                                        <div class="col-md-6 col-xs-7">
                                            <div class="col-md-9">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" onkeypress="return isNumberKey(event);" name="surge_multiplier" id="surge_multiplier"
                                                           />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_surge_multiplier') %>">?</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div> -->
                                    
                                </div>

                            </div>
                           <div class="row" style="margin-top: 50px;">
                                    <!-- <div class="col-md-3">
                                    </div> -->
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="col-md-3 col-xs-5 control-label"><%= __('title_surge_time') %></label>

                                            <div class="col-md-6 col-xs-7">
                                                <div class="panel panel-default tabs">
                                                    <ul class="nav nav-tabs" role="tablist">
                                                        <li><a href="#0" id="tab0" onclick="select_tab(0)" role="tab" data-toggle="tab"><%= __('sun') %></a></li>
                                                        <li><a href="#1" role="tab" onclick="select_tab(1)" data-toggle="tab"><%= __('mon') %></a></li>
                                                        <li><a href="#2" role="tab" onclick="select_tab(2)" data-toggle="tab"><%= __('tue') %></a></li>
                                                        <li><a href="#3" role="tab" onclick="select_tab(3)" data-toggle="tab"><%= __('wed') %></a></li>
                                                        <li><a href="#4" role="tab" onclick="select_tab(4)" data-toggle="tab"><%= __('thu') %></a></li>
                                                        <li><a href="#5" role="tab" onclick="select_tab(5)" data-toggle="tab"><%= __('fri') %></a></li>
                                                        <li><a href="#6" role="tab" onclick="select_tab(6)" data-toggle="tab"><%= __('sat') %></a></li>
                                                    </ul>

                                                    <div class="panel-body tab-content">
                                                        <% surge_hours.forEach(function(surge_data){ %>
                                                            <div class="tab-pane" id="<%=surge_data.day%>">
                                                                <div class="row">
                                                                    <div class="form-group">
                                                                        <label class="col-md-4 control-label text-left"><%= __('title_is_surge_hours') %></label>
                                                                        <div class="col-md-4">
                                                                            <label class="switch">
                                                                                <% if( surge_data.is_surge == false ) { %>
                                                                                <input type="checkbox" class="switch" id="switch<%=surge_data.day%>" onchange="change_switch('<%=surge_data.day%>')" name="sms_notification" unchecked />
                                                                                <% } else{ %>
                                                                                <input type="checkbox" id="switch<%=surge_data.day%>" onchange="change_switch('<%=surge_data.day%>')" class="switch" name="sms_notification" checked />
                                                                                <% } %>
                                                                                <span></span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <button type="button" class="btn btn-primary" style="text-align:center;margin: 0 auto;" onclick="add_time()"><span class="fa fa-plus"></span><%= __('add_time') %></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="table-responsive">
                                                                            <table class="table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th><%= __('surge_start_time') %></th>
                                                                                        <th><%= __('surge_end_time') %></th>
                                                                                        <th><%= __('surge_multiplier') %></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody id="day_time<%=surge_data.day%>">
                                                                                    
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        <% }) %>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                        </div>

                        <div class="panel-footer">
                            <button id="submit" type="submit" name="submit" value="submit" class="btn btn-primary btn-block" style="text-align:center;width:80px;margin: 0 auto;"><%= __('button_submit') %></button>
                        </div>
                    </div>
                </div>

            </form>
            <% } %>

        
        
    </div>
<% include colorbar.html %>

</div>
<!-- END PAGE CONTENT WRAPPER -->
</div>
<!-- END PAGE CONTENT -->
</div>
<!-- END PAGE CONTAINER -->


<div class="modal animated fadeIn" data-backdrop="static" data-keyboard="false" id="addtime_modal" tabindex="-1" role="dialog" aria-labelledby="smallModalHead" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"><%= __('button_close') %></span></button>
            <label><%= __('title_surge_time') %></label>
        </div>
        <div class="modal-body">
            <div class="form-group col-md-12">
                <div class="col-md-12">
                  <lable><%= __('surge_start_time') %></lable>
                </div>  
                <div class="col-md-12">
                       <input type="text" class="form-control" name="start_time" id="start_time" readonly />
                </div>
            </div>
             <div class="form-group col-md-12">
                <div class="col-md-12">
                  <lable><%= __('surge_end_time') %></lable>
                </div>  
                <div class="col-md-12">
                       <input type="text" class="form-control" name="end_time" id="end_time" readonly />
                </div>
            </div>
            <div class="form-group col-md-12">
                <div class="col-md-12">
                  <lable><%= __('surge_multiplier') %></lable>
                </div>  
                <div class="col-md-12">
                       <input type="text" onkeypress="return isNumberKey(event);" class="form-control" name="surge_multiplier" id="surge_multiplier" />
                </div>
            </div>
            <lable id="time_error" class="error"></lable>

        </div>
        <div class="modal-footer" style="text-align: center;">
            <input type="button" onclick="add_time_to_array()" class="btn btn-primary" id="ride_laters" value="<%= __('button_apply') %>">
        </div>
    </div>
  </div>
</div>


<script type='text/javascript'>
    $('#tab0').click();
    var selected_tab = 0;
    var city_zone = [];
    <% if(typeof city_type_data != 'undefined' && city_type_data.surge_hours){ %>
        var model_type = "<%= city_type_data.model_type%>" || null
        city_zone = <%-JSON.stringify(city_zone)%>;

        var city_type_data = <%-JSON.stringify(city_type_data)%>;

        var city_type_id = '<%=city_type_data._id%>';

        $('#rich_area_surge').empty();
        city_zone.forEach(function(city_zone_detail, index){
            if(index == 0)
            {
                $('#rich_area_surge').append('<div class="panel-body">');
            }
            var surge_multiplier = 1;
            if(city_type_data.rich_area_surge){
                    var surge_index = city_type_data.rich_area_surge.findIndex((x)=>(x.id).toString() == (city_zone_detail._id).toString())
                if(surge_index !== -1){
                    surge_multiplier = city_type_data.rich_area_surge[surge_index].surge_multiplier;
                }
            }
            
            $('#rich_area_surge .panel-body').append('<div class="form-group col-md-6"><label class="col-md-6 col-xs-5 control-label">'+ city_zone_detail.title +' Surge Multiplier' + '</label><div class="col-md-6 col-xs-7"><div class="col-md-9"><input type="hidden" value="'+city_zone_detail._id+'"  name="rich_area_surge['+index+'][id]"><div class="input-group"><input type="text" onkeypress="return isNumberKey(event);" id="'+city_zone_detail._id+'" class="form-control" value="'+surge_multiplier+'"  name="rich_area_surge['+index+'][surge_multiplier]" required/><span class="input-group-btn"><button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_surge_multiplier') %>">?</button></span></div></div></div></div>');  

            if(index == city_zone.length-1)
            {
                $('#rich_area_surge').append('</div>');
            }
        });
    <% } %>

    <% if(typeof city_type_data != 'undefined' && city_type_data.surge_hours){ %>
        surge_hours = <%- JSON.stringify(city_type_data.surge_hours) %>;
        
    <%} else { %>
        surge_hours = <%- JSON.stringify(surge_hours) %>;
    <% } %>
    set_surge_time();

    function set_surge_time(){
        surge_hours.forEach(function(surge_data){
            $('#day_time'+surge_data.day).empty();
            surge_data.day_time.forEach(function(day_time_data, index){
                $('#day_time'+surge_data.day).append('<tr><td>'+day_time_data.start_time+'</td><td>'+day_time_data.end_time+'</td><td>'+day_time_data.multiplier+'</td><td><span class="fa fa-times" onclick="delete_time(\''+index+'\')"></span></td></tr>')
            })
            
        })
        $('#surge_hours').val(surge_hours);
    }

    function change_switch(id){
        if($('#switch'+id).is(":checked")) {
            surge_hours[selected_tab].is_surge = true;
        } else {
            surge_hours[selected_tab].is_surge = false;
        }
    }

    function delete_time(index){
        surge_hours[selected_tab].day_time.splice(index, 1);
        set_surge_time()
    }

    function main_tab(tab){
        if(tab == 5 || tab == 7){
            $('#footer').hide()
        } else {
            $('#footer').show()

        }

        // if(tab==1){
        //     $('#main_div').removeClass('col-md-12')
        //     $('#main_div').addClass('col-md-8')
        //     $('#zone_queue').show();
        // } else {
        //     $('#main_div').removeClass('col-md-8')
        //     $('#main_div').addClass('col-md-12')
        //     $('#zone_queue').hide();
        // }
    }

    $('#start_time').mdtimepicker({
      timeFormat: 'hh:mm',
      theme: '#250e62',
      readOnly: true,
      format: 'hh:mm',
      hourPadding: true
    });

    $('#end_time').mdtimepicker({
      timeFormat: 'hh:mm',
      theme: '#250e62',
      readOnly: true,
      format: 'hh:mm',
      hourPadding: true
    });

    function select_tab(index){
        selected_tab = index;
    }

    function add_time(){
        $('#addtime_modal').modal('show')
    }

    function add_time_to_array(){
        var start_time = $('#start_time').val();
        var end_time = $('#end_time').val();
        var surge_multiplier = $('#surge_multiplier').val();
        if(start_time && end_time ){
            if(surge_multiplier != ''){
                var start_date = new Date(Date.now())
                var start_time_date1=start_time.split(':');
                start_date.setHours(start_time_date1[0] , start_time_date1[1] , 0,0)
                start_time_date1=start_date.getTime();

                var end_date = new Date(Date.now())
                end_time_date1=end_time.split(':');
                end_date.setHours(end_time_date1[0] , end_time_date1[1] , 0,0)
                end_time_date1=end_date.getTime();

                if(start_time_date1>=end_time_date1)
                {
                    $('#time_error').text('<%= __('surge_time_error') %>')
                } else {
                    var already_added = false;
                    var current_date = new Date()
                    if(!selected_tab){
                        selected_tab = 0;
                    }
                    surge_hours[selected_tab].day_time.forEach(function(day_time){
                        var start_time1 = day_time.start_time.split(':');
                        var end_time1 = day_time.end_time.split(':');
                        var start_time_date = current_date.setHours(start_time1[0], start_time1[1], 0 ,0);
                        var end_time_date = current_date.setHours(end_time1[0], end_time1[1], 0 ,0);
                        start_time_date = new Date(start_time_date);
                        end_time_date = new Date(end_time_date);
                        start_time_date = start_time_date.getTime();
                        end_time_date = end_time_date.getTime();

                        if( ( start_time_date <= start_time_date1) && (start_time_date1 <= end_time_date )) {
                            already_added = true; 
                        }
                        else if(start_time_date1<=start_time_date && end_time_date<=end_time_date1){
                            already_added = true; 
                        }

                        if( ( start_time_date <= end_time_date1 ) && (end_time_date1 <= end_time_date)) {
                            already_added = true; 

                        }
                        else if(start_time_date1<=start_time_date && end_time_date<=end_time_date1){
                            already_added = true; 
                        }
                    });
                    if(already_added){
                        $('#time_error').text('<%= __('please_select_proper_time') %>')
                    } else {
                        surge_hours[selected_tab].day_time.push({
                            start_time: start_time,
                            end_time: end_time,
                            multiplier: surge_multiplier
                        });
                        $('#addtime_modal').modal('hide');
                        $('#start_time').val('');
                        $('#end_time').val('');
                        set_surge_time();
                    }
                }
            } else {
                $('#time_error').text('<%= __('surge_multiplier_is_required') %>')
            }

        } else {
            $('#time_error').text('<%= __('select_start_end_time') %>')
        }
    }

    function add_carrental_form(){
        $('#car_rental').append('<tr id="new_car_rental"><td><input class="form-control" type="text" name="carrental_typename" id="carrental_typename" value=""></td><td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_base_price_distance" id="carrental_base_price_distance" value=""></td><td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_base_price_time" id="carrental_base_price_time" value=""></td><td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_base_price" id="carrental_base_price" value=""></td><td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="carrental_price_per_unit_distance" id="carrental_price_per_unit_distance" value=""></td><td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="carrental_price_for_total_time" id="carrental_price_for_total_time" value=""></td><td><select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="carrental_is_business" name="carrental_is_business"><option value="1" selected = "selected"><%= __('title_on') %></option><option value="0"><%= __('title_off') %></option></select></td><td><button type="button" onclick="add_carrental_data()" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_add') %></button></td></tr>')
    }
    
    function add_model_pricing_form(){
        fetch_truck_type_list()
    }

    function fetch_truck_type_list() {
            var cityname = $("#cityname").val();
            var typename = $("#typename").val();
            // var is_ride_share = $("#is_ride_share").val();
            if (cityname == "") { return; }
            if (typename == "") { return; }
      
            //var array = [];
            var unique_array = [];
            //var difference = [];
            var city_type_array = [];
            var truck_type_array = [];

            $.ajax({
                type: 'POST',
                url: '/fetch_truck_type_list',
                data: { cityname: cityname, typename:typename, is_ride_share: 0 },
                dataType: "json",
                success: function (res) {
                    if(res.success) {

                    var res_truck_type_list = res.truck_type_list;
                    var res_service_list = res.service_list;
                    var res_capacity_list = res.capacity_list;
                    let gandola_fields = "";  
                    let moreThanFields = "";

                    if(
                        city_type_data.model_type != parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || city_type_data.model_type != parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL%>')
                    ){ 
                        moreThanFields += '<td><input class="form-control" type="text" name="price_per_km_r" id="price_per_km_r" onkeypress="return isNumberKey(event);"  value=""></td>';
                    }

                    if(parseInt(model_type) === parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || parseInt(model_type) === parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL %>')){
                        gandola_fields = 
                        `<td>
                            <input class="form-control"
                            type="text"
                            name="price_per_km_p" 
                            id="price_per_km_p" 
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_q" 
                            id="price_per_km_q"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_r" 
                            id="price_per_km_r"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_s" 
                            id="price_per_km_s"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_t" 
                            id="price_per_km_t"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_u" 
                            id="price_per_km_u"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_v" 
                            id="price_per_km_v"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_w" 
                            id="price_per_km_w"
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>` + 
                        `<td>
                            <input class="form-control" 
                            type="text" name="price_per_km_y" 
                            id="price_per_km_y" 
                            onkeypress="return isNumberKey(event);"  
                            value="">
                        </td>`;
                    }

                    $('#model_pricing').append('<tr id="new_model_pricing"><td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="modelid" name="modelid[]"><optgroup id="append1" label="<%= __('title_truck_type_list') %>"></optgroup></select></td>' +
                        '<td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="serviceid" name="serviceid[]"><optgroup id="append2" label="<%= __('title_service_list') %>"></optgroup></select></td>' +
                        '<td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="capacityid" name="capacityid[]"><optgroup id="append3" label="<%= __('title_capacity_list') %>"></optgroup></select></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="min_fare_type" id="min_fare_type" value=""></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_a" id="price_per_km_a" value=""></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_b" id="price_per_km_b" value=""></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_c" id="price_per_km_c" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_d" id="price_per_km_d" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_e" id="price_per_km_e" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_f" id="price_per_km_f" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_g" id="price_per_km_g" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_h" id="price_per_km_h" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_i" id="price_per_km_h" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_j" id="price_per_km_i" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_k" id="price_per_km_j" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_m" id="price_per_km_m" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_n" id="price_per_km_n" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_l" id="price_per_km_l" value=""></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_o" id="price_per_km_o" value=""></td>' + 

                        moreThanFields +
                        gandola_fields +

                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="fixed_fees" id="fixed_fees" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="cost_per_stop_inside_city" id="cost_per_stop_inside_city" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="cost_per_stop_outside_city" id="cost_per_stop_outside_city" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="cost_per_helper" id="cost_per_helper" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="night_shift" id="night_shift" value=""></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="boat_ticket" id="boat_ticket" value=""></td>' +
                        '<% if(corporate_data?.is_use_fixed_partner_profit){ %>'+
                            '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="corporate_partner_profit_fees" id="corporate_partner_profit_fees" value=""></td>' + 
                        '<% } %>'+
                        '<% if(city_type_data_country.countryname == "Panama"){ %>'+
                            '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="ti_internal_transit" id="ti_internal_transit" value=""></td>' + 
                        '<% } %>'+

                        '<td><button type="button" onclick="add_modelpricing_data()" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_add') %></button></td><td></td></tr>'
                    )

                    if (res_truck_type_list == "")
                    {
                        $("#message").html('<font color="red">Truck type not available for this Model</font>');
                        $("#submit").attr("disabled", true);
                    } else
                    {
                        $("#append1").empty();  
                        $(".fs-optgroup").empty();

                        for (var index in res_truck_type_list)
                        {
                            var truck_type_name = res_truck_type_list[index].model_name;
                            var truck_type_id = res_truck_type_list[index]._id;

                            $("#message").html('<font color="red"></font>');
                            $("#submit").attr("disabled", false);
                            
                            $("#append1").append("<option value="+ truck_type_id +">"+truck_type_name+"</option>");
                            $(".fs-optgroup").append(" <div class='fs-option' data-value=" + truck_type_id + " data-index=" + truck_type_id + "><span class='fs-checkbox'><i></i></span><div class='fs-option-label'>" + truck_type_name + "</div></div>");

                        }

                        $('#modelid').fSelect({
                            placeholder: '<%= __("title_select_truck_type")%>',
                            numDisplayed: 3,
                            overflowText: '{n} selected',
                            searchText: '<%= __("title_search_text")%>',
                            showSearch: true
                        });

                        $('#modelid').selectpicker('refresh');
                    }

                    if (res_service_list.length > 0)
                    {
                        $("#append2").empty();  
                        // $(".fs-optgroup").empty();

                        for (var index in res_service_list)
                        {
                            var service_name = res_service_list[index].service_name;
                            var service_id = res_service_list[index]._id;

                            $("#message").html('<font color="red"></font>');
                            $("#submit").attr("disabled", false);
                            
                            $("#append2").append("<option value="+ service_id +">"+service_name+"</option>");
                        }

                        $('#serviceid').fSelect({
                            placeholder: '<%= __("title_select_service")%>',
                            numDisplayed: 3,
                            overflowText: '{n} selected',
                            searchText: '<%= __("title_search_text")%>',
                            showSearch: true
                        });

                        $('#serviceid').selectpicker('refresh');
                    }

                    if (res_capacity_list.length > 0)
                    {
                        $("#append3").empty();  

                        for (var index in res_capacity_list)
                        {
                            var capacity_name = res_capacity_list[index].capacity_name;
                            var capacity_id = res_capacity_list[index]._id;
                            let unit = res_capacity_list[index].unit;
                            let capacity_unit = ""
                            if(unit == 0 ){capacity_unit = 'Kilos' }else if(unit == 1){capacity_unit =  'Litre' }else if(unit == 2){capacity_unit = 'm3' }

                            $("#message").html('<font color="red"></font>');
                            $("#submit").attr("disabled", false);
                            $("#append3").append("<option value="+ capacity_id +">"+capacity_name+ " " + capacity_unit + "</option>");

                        }

                        $('#capacityid').fSelect({
                            placeholder: '<%= __("title_select_capacity")%>',
                            numDisplayed: 3,
                            overflowText: '{n} selected',
                            searchText: '<%= __("title_search_text")%>',
                            showSearch: true
                        });

                        $('#capacityid').selectpicker('refresh');
                        
                    } else{
                        location.reload()
                    }
                } 
            }
        })
    }
    function add_carrental_data(){
        if($('#carrental_typename').val() && $('#carrental_base_price_distance').val() && $('#carrental_base_price_time').val() && $('#carrental_base_price').val() &&  $('#carrental_price_per_unit_distance').val() && $('#carrental_price_for_total_time').val() && $('#carrental_is_business').val()){
            var json = {
                typename:  $('#carrental_typename').val(),
                base_price_distance: $('#carrental_base_price_distance').val(),
                base_price_time: $('#carrental_base_price_time').val(),
                base_price: $('#carrental_base_price').val(),
                price_per_unit_distance: $('#carrental_price_per_unit_distance').val(),
                price_for_total_time: $('#carrental_price_for_total_time').val(),
                is_business: $('#carrental_is_business').val(),
                city_type_id: $('#id').val(),
                provider_profit: $('#provider_profit').val()
            }
            $.ajax({
                type: 'POST',
                url: '/add_carrental_data',
                data: json,
                dataType: "json",
                success:function(response){
                    $('#new_car_rental').remove();
                    $('#car_rental').append('<tr id="new_car_rental'+response.carrental_data._id+'"><td><input class="form-control" type="text" name="carrental_typename" onkeypress="return isNumberKey(event);" id="carrental_typename'+response.carrental_data._id+'" value="'+response.carrental_data.typename+'"></td><td><input class="form-control" type="text" name="carrental_base_price_distance" onkeypress="return isNumberKey(event);" id="carrental_base_price_distance'+response.carrental_data._id+'" value="'+response.carrental_data.base_price_distance+'"></td><td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="carrental_base_price_time" id="carrental_base_price_time'+response.carrental_data._id+'" value="'+response.carrental_data.base_price_time+'"></td><td><input class="form-control" type="text" name="carrental_base_price" id="carrental_base_price'+response.carrental_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.carrental_data.base_price+'"></td><td><input class="form-control" type="text" name="carrental_price_per_unit_distance" onkeypress="return isNumberKey(event);" id="carrental_price_per_unit_distance'+response.carrental_data._id+'" value="'+response.carrental_data.price_per_unit_distance+'"></td><td><input class="form-control" type="text" name="carrental_price_for_total_time" id="carrental_price_for_total_time'+response.carrental_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.carrental_data.price_for_total_time+'"></td><td><select class="form-control select" data-none-selected-text="<%= __('title_nothing_selected') %>" id="carrental_is_business'+response.carrental_data._id+'" name="carrental_is_business"><option value="1" selected = "selected"><%= __('title_on') %></option><option value="0"><%= __('title_off') %></option></select></td><td><button type="button" onclick="update_carrental_data('+"'"+response.carrental_data._id+"'"+')" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_update') %></button> <button type="button" onclick="delete_carrental_data('+"'"+response.carrental_data._id+"'"+')" class="btn btn-danger" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_delete') %></button></td></tr>')
                }
            });
        }
    }

    function update_carrental_data(id){
        if($('#carrental_typename'+id).val() && $('#carrental_base_price_distance'+id).val() &&  $('#carrental_base_price_time'+id).val() && $('#carrental_base_price'+id).val() && $('#carrental_price_per_unit_distance'+id).val() &&  $('#carrental_price_for_total_time'+id).val() &&  $('#carrental_is_business'+id).val()){
            var json = {
                typename:  $('#carrental_typename'+id).val(),
                base_price_distance: $('#carrental_base_price_distance'+id).val(),
                base_price_time: $('#carrental_base_price_time'+id).val(),
                base_price: $('#carrental_base_price'+id).val(),
                price_per_unit_distance: $('#carrental_price_per_unit_distance'+id).val(),
                price_for_total_time: $('#carrental_price_for_total_time'+id).val(),
                is_business: $('#carrental_is_business'+id).val(),
                id: id,
                provider_profit: $('#provider_profit').val()
            }
            $.ajax({
                type: 'POST',
                url: '/update_carrental_data',
                data: json,
                dataType: "json",
                success:function(response){
                    
                }
            });
        }
    }

    function delete_carrental_data(id){
        $.ajax({
            type: 'POST',
            url: '/delete_carrental_data',
            data: {id: id , city_type_id: $('#id').val()},
            dataType: "json",
            success:function(response){
                $('#new_car_rental'+id).remove();
            }
        });
    }

    function add_modelpricing_data() {
        var gandola_condition = true;

        if(model_type == parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || model_type == parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL %>')) {
            gandola_condition = 
                $('#price_per_km_p').val() && 
                $('#price_per_km_q').val()
        }

        if( (
            $('#modelid').val() || 
            $('#serviceid').val() || 
            $('#capacityid').val()) && 
                $('#price_per_km_a').val() &&
                $('#price_per_km_b').val() && 
                $('#price_per_km_c').val() &&  
                $('#price_per_km_d').val() && 
                $('#price_per_km_e').val() && 
                $('#price_per_km_f').val() && 
                $('#price_per_km_g').val() && 
            $('#fixed_fees').val() && 
            $('#cost_per_stop_inside_city').val() && 
            $('#cost_per_stop_outside_city').val() && 
            $('#cost_per_helper').val() && gandola_condition){   
            
            var json = {
                modelid:  $('#modelid').val(),
                serviceid:  $('#serviceid').val(),
                capacityid:  $('#capacityid').val(),
                price_per_km_a: $('#price_per_km_a').val(),
                price_per_km_b: $('#price_per_km_b').val(),
                price_per_km_c: $('#price_per_km_c').val(),
                price_per_km_d: $('#price_per_km_d').val(),
                price_per_km_e: $('#price_per_km_e').val(),
                price_per_km_f: $('#price_per_km_f').val(),
                price_per_km_g: $('#price_per_km_g').val(),
                price_per_km_h: $('#price_per_km_h').val(),
                price_per_km_i: $('#price_per_km_i').val(),
                price_per_km_j: $('#price_per_km_j').val(),
                price_per_km_k: $('#price_per_km_k').val(),
                price_per_km_m: $('#price_per_km_m').val(),
                price_per_km_n: $('#price_per_km_n').val(),
                price_per_km_l: $('#price_per_km_l').val(),
                price_per_km_o: $('#price_per_km_o').val(),
                price_per_km_p: $('#price_per_km_p').val(),
                price_per_km_q: $('#price_per_km_q').val(),
                price_per_km_r: $('#price_per_km_r').val(),
                price_per_km_s: $('#price_per_km_s').val(),
                price_per_km_t: $('#price_per_km_t').val(),
                price_per_km_u: $('#price_per_km_u').val(),
                price_per_km_v: $('#price_per_km_v').val(),
                price_per_km_w: $('#price_per_km_w').val(),
                price_per_km_y: $('#price_per_km_y').val(),
                min_fare: $("#min_fare_type").val(),
                fixed_fees: $('#fixed_fees').val(),
                cost_per_stop_inside_city: $('#cost_per_stop_inside_city').val(),
                cost_per_stop_outside_city: $('#cost_per_stop_outside_city').val(),
                cost_per_helper: $('#cost_per_helper').val(),
                city_type_id: $('#id').val(),
                cityname: $('#cityname').val(),
                provider_profit: $('#provider_profit').val(),
                night_shift: $('#night_shift').val(),
                boat_ticket: $('#boat_ticket').val(),
                corporate_partner_profit_fees: $('#corporate_partner_profit_fees').val(),
                ti_internal_transit: $('#ti_internal_transit').val(),
            }
            
            $.ajax({
                type: 'POST',
                url: '/add_modelpricing_data',
                data: json,
                dataType: "json",
                success:function(response){
                    $('#new_model_pricing').remove();
                    let gandola_fields = ""
                    let moreThanFields = "";

                    if(
                        city_type_data.model_type != parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || city_type_data.model_type != parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL %>')
                    ){ 
                        moreThanFields += '<td><input class="form-control" type="text" name="price_per_km_r" id="price_per_km_r'+response.modelpricing_data._id+'" onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.price_per_km_r+'"></td>';
                    }

                    if(Number(model_type) === parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || Number(model_type) === parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL %>')){
                        gandola_fields = 
                        `<td>
                            <input class="form-control"
                            type="text"
                            name="price_per_km_p" 
                            id="price_per_km_p${response.modelpricing_data._id}" 
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_p}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_q" 
                            id="price_per_km_q${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_q}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_r" 
                            id="price_per_km_r${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_r}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_s" 
                            id="price_per_km_s${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_s}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_t" 
                            id="price_per_km_t${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_t}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_u" 
                            id="price_per_km_u${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_u}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_v" 
                            id="price_per_km_v${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_v}">
                        </td>` +
                        `<td>
                            <input class="form-control" type="text" 
                            name="price_per_km_w" 
                            id="price_per_km_s${response.modelpricing_data._id}"
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_w}">
                        </td>` +
                        `<td>
                            <input class="form-control" 
                            type="text" name="price_per_km_y" 
                            id="price_per_km_y${response.modelpricing_data._id}" 
                            onkeypress="return isNumberKey(event);"  
                            value="${response.modelpricing_data.price_per_km_y}">
                        </td>`;
                    }

                    $('#model_pricing').append('<tr id="new_model_pricing'+response.modelpricing_data._id+'"><td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="modelid'+response.modelpricing_data._id+'" name="modelid[]"><optgroup id="append4'+response.modelpricing_data._id+'" label="<%= __('title_truck_type_list') %>"></optgroup></select></td>' +
                        '<td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="serviceid'+response.modelpricing_data._id+'" name="serviceid[]"><optgroup id="append5'+response.modelpricing_data._id+'" label="<%= __('title_service_list') %>"></optgroup></select></td>' +
                        '<td><select class="form-control select" multiple="multiple" data-none-selected-text="<%= __('title_nothing_selected') %>" id="capacityid'+response.modelpricing_data._id+'" name="capacityid[]"><optgroup id="append6'+response.modelpricing_data._id+'" label="<%= __('title_capacity_list') %>"></optgroup></select></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="min_fare_type'+response.modelpricing_data._id+'"  id="min_fare_type" value="'+response.modelpricing_data.min_fare+'"></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_a'+response.modelpricing_data._id+'" id="price_per_km_a" value="'+response.modelpricing_data.price_per_km_a+'"></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_b'+response.modelpricing_data._id+'" id="price_per_km_b" value="'+response.modelpricing_data.price_per_km_b+'"></td>' +
                        '<td><input onkeypress="return isNumberKey(event);" class="form-control" type="text" name="price_per_km_c'+response.modelpricing_data._id+'" id="price_per_km_c" value="'+response.modelpricing_data.price_per_km_c+'"></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_d'+response.modelpricing_data._id+'" id="price_per_km_d" value="'+response.modelpricing_data.price_per_km_d+'"></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_e'+response.modelpricing_data._id+'" id="price_per_km_e" value="'+response.modelpricing_data.price_per_km_e+'"></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_f'+response.modelpricing_data._id+'" id="price_per_km_f" value="'+response.modelpricing_data.price_per_km_f+'"></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_g'+response.modelpricing_data._id+'" id="price_per_km_g" value="'+response.modelpricing_data.price_per_km_g+'"></td>' +
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_h'+response.modelpricing_data._id+'" id="price_per_km_h" value="'+response.modelpricing_data.price_per_km_h+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_i'+response.modelpricing_data._id+'" id="price_per_km_i" value="'+response.modelpricing_data.price_per_km_i+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_j'+response.modelpricing_data._id+'" id="price_per_km_j" value="'+response.modelpricing_data.price_per_km_j+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_k'+response.modelpricing_data._id+'" id="price_per_km_k" value="'+response.modelpricing_data.price_per_km_k+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_m'+response.modelpricing_data._id+'" id="price_per_km_m" value="'+response.modelpricing_data.price_per_km_m+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_n'+response.modelpricing_data._id+'" id="price_per_km_n" value="'+response.modelpricing_data.price_per_km_n+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_l'+response.modelpricing_data._id+'" id="price_per_km_l" value="'+response.modelpricing_data.price_per_km_l+'"></td>' + 
                        '<td><input class="form-control" type="text" onkeypress="return isNumberKey(event);" name="price_per_km_o'+response.modelpricing_data._id+'" id="price_per_km_o" value="'+response.modelpricing_data.price_per_km_o+'"></td>' + 
                        moreThanFields + 
                        gandola_fields +
                        '<td><input class="form-control" type="text" name="fixed_fees" id="fixed_fees'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.fixed_fees+'"></td>' +
                        '<td><input class="form-control" type="text" name="cost_per_stop_inside_city" id="cost_per_stop_inside_city'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.cost_per_stop_inside_city+'"></td>' +
                        '<td><input class="form-control" type="text" name="cost_per_stop_outside_city" id="cost_per_stop_outside_city'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.cost_per_stop_outside_city+'"></td>' +
                        '<td><input class="form-control" type="text" name="cost_per_helper" id="cost_per_helper'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.cost_per_helper+'"></td>' +
                        '<td><input class="form-control" type="text" name="night_shift" id="night_shift'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.night_shift+'"></td>' +
                        '<td><input class="form-control" type="text" name="boat_ticket" id="boat_ticket'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.boat_ticket+'"></td>' +
                        '<% if(corporate_data?.is_use_fixed_partner_profit){ %>'+
                            '<td><input class="form-control" type="text" name="corporate_partner_profit_fees" id="corporate_partner_profit_fees'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.corporate_partner_profit_fees+'"></td>' +
                        '<% } %>'+
                        '<% if(city_type_data_country.countryname == "Panama"){ %>'+
                            '<td><input class="form-control" type="text" name="ti_internal_transit" id="ti_internal_transit'+response.modelpricing_data._id+'"onkeypress="return isNumberKey(event);"  value="'+response.modelpricing_data.ti_internal_transit+'"></td>' +
                        '<% } %>'+
                        '<td><button type="button" onclick="update_modelpricing_data('+"'"+response.modelpricing_data._id+"'"+')" class="btn btn-primary" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_update') %></button></td>' +
                        '<td><button type="button" onclick="delete_modelpricing_data('+"'"+response.modelpricing_data._id+"'"+')" class="btn btn-danger" style="float:left;text-align:center;margin: 0 auto;"><%= __('button_delete') %></button></td></tr>'
                        );

                    $('#append4'+response.modelpricing_data._id).empty();  
                    let res_truck_type_list = response.modelpricing_data.modelid
                    for (var index in res_truck_type_list)
                        {
                            var truck_type_name = res_truck_type_list[index].model_name;
                            var truck_type_id = res_truck_type_list[index]._id;
                            
                            $('#append4'+response.modelpricing_data._id).append("<option disabled selected value="+ truck_type_id +">"+truck_type_name+"</option>");

                        }

                    $('#modelid'+response.modelpricing_data._id).selectpicker('refresh');
                    
                    $('#append5'+response.modelpricing_data._id).empty();  
                    let res_service_list = response.modelpricing_data.serviceid
                    for (var index in res_service_list)
                    {
                        var service_name = res_service_list[index].service_name;
                        var service_id = res_service_list[index]._id;

                        $("#message").html('<font color="red"></font>');
                        $("#submit").attr("disabled", false);
                        
                        $('#append5'+response.modelpricing_data._id).append("<option disabled selected value="+ service_id +">"+service_name+"</option>");
                    }
                    $('#serviceid'+response.modelpricing_data._id).selectpicker('refresh');

                    $('#append6'+response.modelpricing_data._id).empty();  
                    let res_capacity_list = response.modelpricing_data.capacityid
                    for (var index in res_capacity_list)
                    {
                        var capacity_name = res_capacity_list[index].capacity_name;
                        var capacity_id = res_capacity_list[index]._id;
                        let unit = res_capacity_list[index].unit;
                        let capacity_unit = ""
                        if(unit == 0 ){capacity_unit = 'Kilos' }else if(unit == 1){capacity_unit =  'Litre' }else if(unit == 2){capacity_unit = 'm3' }

                        $("#message").html('<font color="red"></font>');
                        $("#submit").attr("disabled", false);
                        
                        $('#append6'+response.modelpricing_data._id).append("<option disabled selected value="+ capacity_id +">"+capacity_name+" "+capacity_unit+ "</option>");
                    }
                    $('#capacityid'+response.modelpricing_data._id).selectpicker('refresh');

                }
            });
        } else {
            alert("")
        }
    }

    function update_modelpricing_data(id){
        var gandola_condition = $('#price_per_km_a'+id).val()

        if(model_type === parseInt('<%= MODEL_TRUCK_TYPE.GANDOLA %>') || model_type === parseInt('<%= MODEL_TRUCK_TYPE.CABEZAL %>')){
            gandola_condition = 
                $('#price_per_km_p'+id).val() && 
                $('#price_per_km_q'+id).val() && 
                $('#price_per_km_r'+id).val()
        }

        if(
                $('#price_per_km_a'+id).val() &&
                $('#price_per_km_b'+id).val() && 
                $('#price_per_km_c'+id).val() &&  
                $('#price_per_km_d'+id).val() && 
                $('#price_per_km_e'+id).val() && 
                $('#price_per_km_f'+id).val() && 
                $('#price_per_km_g'+id).val() && 
            $('#fixed_fees'+id).val() && 
            $('#cost_per_stop_inside_city'+id).val() && 
            $('#cost_per_helper'+id).val() && 
            $('#cost_per_stop_outside_city'+id).val() && 
            gandola_condition
        ){  
 
            var json = {
                min_fare: $("#min_fare"+id).val(),
                price_per_km_a: $('#price_per_km_a'+id).val(),
                price_per_km_b: $('#price_per_km_b'+id).val(),
                price_per_km_c: $('#price_per_km_c'+id).val(),
                price_per_km_d: $('#price_per_km_d'+id).val(),
                price_per_km_e: $('#price_per_km_e'+id).val(),
                price_per_km_f: $('#price_per_km_f'+id).val(),
                price_per_km_g: $('#price_per_km_g'+id).val(),
                price_per_km_h: $('#price_per_km_h'+id).val(),
                price_per_km_i: $('#price_per_km_i'+id).val(),
                price_per_km_j: $('#price_per_km_j'+id).val(),
                price_per_km_k: $('#price_per_km_k'+id).val(),
                price_per_km_m: $('#price_per_km_m'+id).val(),
                price_per_km_n: $('#price_per_km_n'+id).val(),
                price_per_km_l: $('#price_per_km_l'+id).val(),
                price_per_km_o: $('#price_per_km_o'+id).val(),
                price_per_km_p: $('#price_per_km_p'+id).val(),
                price_per_km_q: $('#price_per_km_q'+id).val(),
                price_per_km_r: $('#price_per_km_r'+id).val(),
                price_per_km_s: $('#price_per_km_s'+id).val(),
                price_per_km_t: $('#price_per_km_t'+id).val(),
                price_per_km_u: $('#price_per_km_u'+id).val(),
                price_per_km_v: $('#price_per_km_v'+id).val(),
                price_per_km_w: $('#price_per_km_w'+id).val(),
                price_per_km_y: $('#price_per_km_y'+id).val(),
                fixed_fees: $('#fixed_fees'+id).val(),
                cost_per_stop_inside_city: $('#cost_per_stop_inside_city'+id).val(),
                cost_per_stop_outside_city: $('#cost_per_stop_outside_city'+id).val(),
                cost_per_helper: $('#cost_per_helper'+id).val(),
                night_shift: $('#night_shift'+id).val(),
                boat_ticket: $('#boat_ticket'+id).val(),
                corporate_partner_profit_fees: $('#corporate_partner_profit_fees'+id).val(),
                ti_internal_transit: $('#ti_internal_transit'+id).val(),
                id: id,
            }

            $.ajax({
                type: 'POST',
                url: '/update_modelpricing_data',
                data: json,
                dataType: "json",
                success:function(response){
                    
                }
            });
        }
    }

    function delete_modelpricing_data(id){
        $.ajax({
            type: 'POST',
            url: '/delete_modelpricing_data',
            data: {id: id , city_type_id: $('#id').val()},
            dataType: "json",
            success:function(response){
                $('#new_model_pricing'+id).remove();
            }
        });
    }

    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
        {
            if (charCode == 46)
            {
                return true;
            } else
            {
                return false;
            }
        }
        return true;
    }

    function isNumberKeyWithoutPoint(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;

        if (charCode > 31 && (charCode < 48 || charCode > 57))
        {
            // if (charCode == 46)
            // {
            //     return true;
            // } else
            // {
                return false;
            // }
        }
        return true;
    }

    function updateentry(id){
            const amount = $('#amount'+id).val();
            const cost_per_helper = $('#cost_per_helper_zone'+id).val();
            const night_shift = $('#night_shift_zone'+id).val();
            const boat_ticket = $('#boat_ticket_zone'+id).val();
            const cost_per_stop_inside_city = $('#cost_per_stop_inside_city_zone'+id).val();
            const cost_per_stop_outside_city = $('#cost_per_stop_outside_city_zone'+id).val();
            const partner_profit_fees = $('#partner_profit_fees'+id).val();
            const partner_profit_type = $('#partner_profit_type'+id).val();
            const selected_model_id = $('#selected_model_id'+id).val();
            const ti_zone = $('#ti_zone'+id).val();

            if(amount == "")
            {
                alert('Please give amount');
            }
            else
            {
                $.ajax({
                    type: 'POST',
                    url: '/updatezonevalueajax',
                    data: {'id': id ,'amount': amount, partner_profit_fees, partner_profit_type, cost_per_helper, 
                    cost_per_stop_inside_city, cost_per_stop_outside_city, night_shift, boat_ticket, selected_model_id,
                    ti_zone },
                    dataType: "json",
                      success:function(response){
                        if(response.success){
                            alert("<%= __('title_successfully_updated') %>");
                        }else{
                            alert('Something is wrong');
                        }
                      }
                });
            }
        }
    
    function deleteentry(id){
            $.ajax({
                    type: 'POST',
                    url: '/deletezonevalueajax',
                    data: {'id': id},
                    dataType: "json",
                      success:function(response){
                        if(response.success){
                            $('#remove'+id).remove();
                        }else{
                            alert('Something is wrong');
                        }
                      }
                });
    }
        
    $(document).ready(function () {

        $('#modelid').fSelect({
            placeholder: 'Select Truck type',
            numDisplayed: 3,
            overflowText: '{n} selected',
            searchText: 'Search',
            showSearch: true
        });
        $('#serviceid').fSelect({
            placeholder: 'Select Service',
            numDisplayed: 3,
            overflowText: '{n} selected',
            searchText: 'Search',
            showSearch: true
        });

        $('#capacityid').fSelect({
            placeholder: 'Select Capacity',
            numDisplayed: 3,
            overflowText: '{n} selected',
            searchText: 'Search',
            showSearch: true
        });

        $('.fselect-model').fSelect({
            placeholder: '<%= __('title_select_model')%>',
            numDisplayed: 1,
            overflowText: '{n} selected',
            searchText: 'Search',
            showSearch: true
        });

        
        $('#plush_button').click(function(e){
            $('#zone_error').text('');
            const zone1 = $('#zone1').val();
            const zone2 = $('#zone2').val();
            const amount = $('#amount').val();
            const service_type_id = $('#id').val();
            const cityid = $('#cityids').val();
            const partner_profit_fees = $('#partner_profit_fees').val();
            const partner_profit_type = $('#partner_profit_type').val();
            const selected_model_id = $('#selected_model_id').val();
            const cost_per_helper = $('#cost_per_helper_zone').val();
            const night_shift = $('#night_shift_zone').val();
            const cost_per_stop_inside_city = $('#cost_per_stop_inside_city_zone').val();
            const cost_per_stop_outside_city = $('#cost_per_stop_outside_city_zone').val();
            const boat_ticket = $('#boat_ticket_zone').val();
            const ti_zone = $('#ti_zone').val();
            if(amount!= ""){

                // if(zone1 == zone2)
                // {
                //     $('#zone_error').text('Both are not same')
                // }
                // else
                // {
                    $.ajax({
                        type: 'POST',
                        url: '/zonevalueajax',
                        data: {'zone1': zone1, 'zone2':zone2 ,'amount':amount, cityid: cityid ,'id':service_type_id, 
                        partner_profit_fees, partner_profit_type, selected_model_id, cost_per_helper, cost_per_stop_inside_city, 
                        cost_per_stop_outside_city, night_shift, boat_ticket, ti_zone},
                        dataType: "json",
                          success:function(response){
                            if(response.success){
                                let partner_profit_field = ""
                                let partner_profit_type_field = ""
                                let ti_field = ""
                                <% if(corporate_data?.is_use_fixed_partner_profit){ %>
                                    partner_profit_field = '<td><input type="text" id="partner_profit_fees'+response.zone_value._id+'" value="'+partner_profit_fees+'"></td>'
                                    partner_profit_type_field = '<td>'+$('#partner_profit_type option:selected').text()+'</td>'
                                <% } %>
                                <% if(city_type_data_country.countryname == "Panama"){ %>
                                    ti_field = '<td><input type="text" id="ti_zone'+response.ti_zone._id+'" value="'+ti_zone+'"></td>'
                                <% } %>
                                $('#append').append('<tr class="demo" id="remove'+response.zone_value._id+'" > <td>'+$('#zone1 option:selected').text()+'</td><td>'+$('#zone2 option:selected').text()+'</td><td>'+$('#selected_model_id option:selected').text()+'</td><td><input type="text" id="amount'+response.zone_value._id+'" value="'+amount+'"></td><td><input type="text" id="cost_per_helper_zone'+response.zone_value._id+'" value="'+cost_per_helper+'"></td><td><input type="text" id="cost_per_stop_inside_city_zone'+response.zone_value._id+'" value="'+cost_per_stop_inside_city+'"></td><td><input type="text" id="cost_per_stop_outside_city_zone'+response.zone_value._id+'" value="'+cost_per_stop_outside_city+'"></td><td><input type="text" id="night_shift_zone'+response.zone_value._id+'" value="'+night_shift+'"></td><td><input type="text" id="boat_ticket_zone'+response.zone_value._id+'" value="'+boat_ticket+'"></td>'+ partner_profit_field + partner_profit_type_field + ti_field + '<td> <button type="button" class="btn btn-primary btn-block" onclick="updateentry('+"'"+response.zone_value._id+"'"+')" style="float:left;text-align:center;width:80px;margin: 0 auto;"><%= __('button_update') %></button><button type="button" class="btn btn-danger btn-block" onclick="deleteentry('+"'"+response.zone_value._id+"'"+')" style = "text-align:center; width:80px; margin: 0 auto;"> Delete </button></td> </tr>');

                               
                            }else{
                                $('#zone_error').text(response.message)
                            }
                          }
                    });
                // }
            }else{
                $('#zone_error').text('Please give amount');
            }
        });

        

        ////////////////// for change is surge hour hide and show surge multiplier , end hour and start hour /////////////

        var is_payment_mode_card = $('#is_surge_hours :selected').text();

            if(is_payment_mode_card=="ON")
            {
                $("#surge_end_hours").css("display", "block");
                $("#surge_multipliers").css("display", "block");
                $("#surge_start_hours").css("display", "block");
            }
            else
            {
                $("#surge_end_hours").css("display", "none");
                $("#surge_multipliers").css("display", "none");
                $("#surge_start_hours").css("display", "none");
            }

            $('#is_zone').change(function (e) {
                if(this.value==1)
                {
                    $("#zone_multiplier").css("display", "block");                
                }
                else
                {
                    $("#zone_multiplier").css("display", "none");
                    
                }
            });

        $('#is_surge_hours').change(function (e) {

            if(this.value==1)
            {
                $("#surge_end_hours").css("display", "block");
                $("#surge_multipliers").css("display", "block");
                $("#surge_start_hours").css("display", "block");
            }
            else
            {
                $("#surge_end_hours").css("display", "none");
                $("#surge_multipliers").css("display", "none");
                $("#surge_start_hours").css("display", "none");
            }

        });
        ///////////////////////////

        $("#add_city_type_detail").validate({
            ignore:[],
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            },
            submitHandler: function() {
                $('.btn-primary').prop('disabled', true)
                $.ajax({
                    type: 'POST',
                    url: '/add_city_type_detail',
                    data: $('#add_city_type_detail').serialize(),
                    dataType: "json",
                    success:function(response){
                        $.ajax({
                            type: 'POST',
                            url: '/update_surge_time',
                            data: {'surge_hours': surge_hours, 'id': response.id},
                            dataType: "json",
                            success:function(response){
                                window.location.href="/city_type";
                            }
                        });
                    }
                });
            },
            invalidHandler: function() {
                setTimeout(function() {
                    $('.nav-tabs a small.required').remove();
                    var validatePane = $('.tab-content.tab-validate .tab-pane:has(input.error)').each(function() {
                        var id = $(this).attr('id');
                        $('.nav-tabs a[href="#' + id + '"]').tab('show');
                        // $('.nav-tabs').find('a[href^="#' + id + '"]').append(' <small class="required">***</small>');
                    });
                });            
            },
            rules: {
                countryid: "required",
                cityid: "required",
                typename: "required",
                base_price_distance: "required",
                base_price: "required",
                min_fare: "required",
                provider_profit: "required",
                price_per_unit_distance: "required",
                price_for_waiting: "required",
                price_for_total_time: "required",
                tax: "required",
                max_space: "required",
                cancellation_fee: "required",
                user_miscellaneous_fee: "required",
                provider_miscellaneous_fee: "required",
                user_tax: "required",
                provider_tax: "required",
                airport_array: "required",
                destcity_array: "required",
                rich_area_surge: "required",
                user_type: "required",
                cost_travel_insurance: "required"
            }
            
        });

        $("#update_city_type_detail").validate({
            ignore:[],
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            },
            submitHandler: function() {
                let city_details = $('#update_city_type_detail').serializeJSON()
                delete city_details.price_per_km_a
                delete city_details.price_per_km_b
                delete city_details.price_per_km_c
                delete city_details.price_per_km_d
                delete city_details.price_per_km_e
                delete city_details.price_per_km_f
                delete city_details.price_per_km_g
                delete city_details.price_per_km_h
                delete city_details.price_per_km_i
                delete city_details.price_per_km_j
                delete city_details.price_per_km_k
                delete city_details.price_per_km_m
                delete city_details.price_per_km_n
                delete city_details.price_per_km_l
                delete city_details.price_per_km_o
                delete city_details.price_per_km_p
                delete city_details.price_per_km_q
                delete city_details.price_per_km_r
                delete city_details.price_per_km_s
                delete city_details.fixed_fees
                delete city_details.cost_per_stop_inside_city
                delete city_details.cost_per_stop_outside_city
                delete city_details.cost_per_helper
                delete city_details.corporate_partner_profit_fees
                delete city_details.ti_internal_transit
                delete city_details.zone1
                delete city_details.zone2
                delete city_details.amount
                delete city_details.night_shift
                delete city_details.boat_ticket
                delete city_details.selected_model_id

                if(model_type == <%= MODEL_TRUCK_TYPE.GANDOLA %> || model_type == <%= MODEL_TRUCK_TYPE.CABEZAL %>){
                    delete city_details.price_per_km_o
                    delete city_details.price_per_km_p
                    delete city_details.price_per_km_q
                    delete city_details.price_per_km_r
                    delete city_details.price_per_km_s
                    delete city_details.price_per_km_t
                    delete city_details.price_per_km_u
                    delete city_details.price_per_km_v
                    delete city_details.price_per_km_w
                    delete city_details.price_per_km_y
                }
                $.ajax({
                    type: 'POST',
                    url: '/update_city_type_detail',
                    data: city_details,
                    dataType: "json",
                    success:function(response){
                        $.ajax({
                            type: 'POST',
                            url: '/update_surge_time',
                            data: {'surge_hours': surge_hours, 'id': $('#id').val()},
                            dataType: "json",
                            success:function(response){
                                window.location.href="/city_type";
                            }
                        });
                    }
                });
            },
            invalidHandler: function() {
                setTimeout(function() {
                    $('.nav-tabs a small.required').remove();
                    var validatePane = $('.tab-content.tab-validate .tab-pane:has(input.error)').each(function() {
                        var id = $(this).attr('id');
                        $('.nav-tabs a[href="#' + id + '"]').tab('show');
                        // $('.nav-tabs').find('a[href^="#' + id + '"]').append(' <small class="required">***</small>');
                    });
                });            
            },
            rules: {
                countryid: "required",
                cityid: "required",
                typename: "required",
                base_price_distance: "required",
                base_price: "required",
                min_fare: "required",
                provider_profit: "required",
                price_per_unit_distance: "required",
                price_for_waiting: "required",
                price_for_total_time: "required",
                tax: "required",
                max_space: "required",
                cancellation_fee: "required",
                user_miscellaneous_fee: "required",
                provider_miscellaneous_fee: "required",
                user_tax: "required",
                provider_tax: "required",
                airport_array: "required",
                destcity_array: "required",
                rich_area_surge: "required",
                cost_travel_insurance: "required"
            }
            
        });

        <% if(typeof city_type_data != 'undefined'){ %>
            destination_city('<%= city_type_data.cityid %>');
        <% } %>

        ///////// change city fill type dropdown for that city //////////////////
        $('#cityid').change(function () {
            fetch_type_list()
        });

        // $('#is_ride_share').change(function () {
        //     fetch_type_list()
        // });

        // $('#typename').change(function () {
        //     fetch_truck_type_list()
        // });
        $('#user_type_id').change(function () {
            fetch_type_list()
        });

        $('#pricing_type').change(function() {
            if ($('#pricing_type').val() == '<%= constant_json.CORPORATE_UNIQUE_NUMBER %>') {
                $('#user_type_id').rules('add', 'required');
                $('#typename').empty();
                $('#typename').selectpicker('refresh');
                fetch_corporate_list()
                
            } else {
                $('#user_type_id').rules('remove', 'required');

                $('#corporate_list').hide();
                fetch_type_list()
            }
        })

        function fetch_type_list() {
            var cityid = $('#cityid').val()
            if (cityid == 'Select City...' || !cityid) {return; }

            let countryid = $('#countryid').val()
            let user_type = $('#pricing_type').val()
            let user_type_id = null 
            if (user_type == '<%= constant_json.CORPORATE_UNIQUE_NUMBER %>') {
                if($('#user_type_id').val() == null){
                    return;
                }else{
                    user_type_id = $('#user_type_id').val();
                }
            }
            var is_ride_share = 0;
            $('#typename').empty();
            $('#typename').selectpicker('refresh');

            //var array = [];
            var unique_array = [];
            //var difference = [];
            var city_type_array = [];
            var type_array = [];

            $.ajax({
                type: 'POST',
                url: '/fetch_servicetype_list',
                data: { cityid: cityid, countryid: countryid, user_type:user_type, user_type_id:user_type_id, is_ride_share: 0 },
                dataType: "json",
                success: function (res) {
                    var res_type_list = res.type_list;
                    var res_reg_city_type_list = res.city_type;

                    ////////////// fill type dropdown only for not already added type //////////
                    for (var index in res_type_list)
                    {
                        type_array.push(res_type_list[index]);
                    }
                    for (var index in res_reg_city_type_list)
                    {   
                        city_type_array.push(res_reg_city_type_list[index].type_detail.typename);
                    }
                    unique_array = type_array.filter(function (current) {
                        return city_type_array.filter(function (current_b) {
                            return current_b == current.typename
                        }).length == 0
                    });

                    if (unique_array == "")
                    {
                        $("#message").html('<font color="red">type not available for this city</font>');
                        $("#submit").attr("disabled", true);
                    } else
                    {
                        for (var index in unique_array)
                        {
                            $("#message").html('<font color="red"></font>');
                            $("#submit").attr("disabled", false);
                            var service_type = unique_array[index];
                            $("#typename").append("<option>" + service_type.typename + "</option>");
                        }
                    }
                    ///////////////////////////////////////////
                    $('#typename').selectpicker('refresh');

                }
            });
            destination_city(cityid);
        }
        
        function fetch_corporate_list() {
            let countryid = document.getElementById('countryid').value;
            if (countryid == 'Select Country...') { return; }

            $('#user_type_id').empty();
            $('#user_type_id').selectpicker('refresh');

            $.ajax({
                type: 'POST',
                url: '/fetch_corporate_list',
                data: { countryid: countryid },
                dataType: "json",
                success: function (res) {
                    $("#user_type_id").append("<option selected disabled hidden style='display: none'><%= __('title_select_corporate')%> </option>");
                     res.corporate_list.forEach((corporate) => {
                        $("#user_type_id").append("<option value="+corporate._id+">" + corporate.name + "</option>");
                    })
                    $('#user_type_id').selectpicker('refresh');
                    $('#corporate_list').show();
                }
            })
        }

        
        function destination_city(cityid)
        {
            var destination_city;
            $.ajax({
                type: 'POST',
                url: '/fetch_destination_city_list',
                data: 'cityid=' + cityid,
                dataType: "json",
                success: function (res) {
                    $('#airport_data').empty();

                    $('#dest_city').empty();
                    res.dest_city_list.forEach(function(city_detail, index){
                    
                        if(index == 0)
                        {
                            $('#dest_city').append('<div class="panel-body">');
                        }

                        $('#dest_city .panel-body').append('<div class="form-group col-md-6"><label class="col-md-6 col-xs-5 control-label">'+ res.city_detail.cityname + ' to ' + city_detail.cityname + ' Price' + '</label><div class="col-md-6 col-xs-7"><div class="col-md-9"><input type="hidden" value="'+city_detail._id+'" name="destcity_array['+index+'][id]"><div class="input-group"><input type="text" onkeypress="return isNumberKey(event);" id="'+city_detail._id+'" class="form-control" name="destcity_array['+index+'][price]" required/><span class="input-group-btn"><button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%= __('tooltip_surge_multiplier') %>">?</button></span></div></div></div></div>');  

                        if(index == res.dest_city_list.length-1)
                        {
                            $('#dest_city').append('</div>');
                        }


                    });
                    res.airport_list.forEach(function(airport_data, index){
                        if(index == 0)
                        {
                            $('#airport_data').append('<div class="panel-body">');
                        }
                
                        $('#airport_data .panel-body').append('<div class="form-group col-md-6"><label class="col-md-6 col-xs-5 control-label">'+airport_data.title+'</label><div class="col-md-6 col-xs-7"><div class="col-md-9"><input type="hidden" value="'+airport_data._id+'" name="airport_array['+index+'][id]"><div class="input-group"><input type="text" onkeypress="return isNumberKey(event);" id="'+airport_data._id+'" class="form-control" name="airport_array['+index+'][price]" required/><span class="input-group-btn"><button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="left" title="" data-original-title="<%=process.env.tooltip_surge_multiplier %>">?</button></span></div></div></div></div>');

                        if(index == res.airport_list.length-1)
                        {
                            $('#airport_data').append('</div>');
                        }

                    })
                
                    <% if(typeof city_type_data != 'undefined'){ %>
                            
                        $.ajax({
                            type: 'POST',
                            url: '/fetch_destination_city_value',
                            data: {cityid: '<%= city_type_data.cityid %>', service_type_id: '<%= city_type_data._id %>'},   
                            dataType: "json",
                            success: function (res) {

                                res.city_to_city_list.forEach(function(city_to_city_detail){
                                    $('#'+city_to_city_detail.destination_city_id).val(city_to_city_detail.price)
                                })  
                            }
                        });
                        $.ajax({
                            type: 'POST',
                            url: '/fetch_airport_value',
                            data: {cityid: '<%= city_type_data.cityid %>', service_type_id: '<%= city_type_data._id %>'},   
                            dataType: "json",
                            success: function (res) {

                                res.airporty_to_city_list.forEach(function(airporty_to_city_detail){
                                   $('#'+airporty_to_city_detail.airport_id).val(airporty_to_city_detail.price)
                                }); 
                            }
                        });
                    <% } %>
                }
            });
        }
        /////////////////////

        ///////// for change country fill city dropdown
        $('#countryid').change(function () {
            $('#cityid').empty();
            $('#pricing_type').prop('selectedIndex',0);
            $('#pricing_type').selectpicker('refresh');
            $('#typename').empty();
            $('#typename').selectpicker('refresh');
            $('#corporate_list').hide()
            $('#user_type_id').empty();
            $('#user_type_id').selectpicker('refresh');

            var countryid = document.getElementById('countryid').value;

            $.ajax({
                type: 'POST',
                url: '/fetch_city_list',
                data: 'countryid=' + countryid,
                dataType: "json",
                success: function (res) {
                    //var res =  JSON.stringify(res);
                    $("#cityid").append("<option selected disabled hidden style='display: none'>Select City...</option>");
                    for (var index in res)
                    {
                        var city_name = res[index].cityname;
                        var city_id = res[index]._id;
                        $("#cityid").append("<option value=" + city_id + ">" + city_name + "</option>");
                    }
                    $('#cityid').selectpicker('refresh');
                }
            });
        });
        /////////////////////////
    });
</script>
<% include footer_form.html %>


